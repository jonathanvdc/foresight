<!DOCTYPE html><html data-pathToRoot="../" data-rawLocation="foresight/eqsat" data-dynamicSideMenu="false"><head><meta charset="utf-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"></meta><title>foresight.eqsat</title><link rel="shortcut icon" type="image/x-icon" href="../favicon.ico"></link><script type="text/javascript" src="../scripts/theme.js"></script><script type="text/javascript" src="../scripts/searchData.js" defer="true"></script><script type="text/javascript" src="../scripts/scastieConfiguration.js" defer="true"></script><link rel="stylesheet" href="../styles/theme/bundle.css"></link><link rel="stylesheet" href="../styles/theme/components/bundle.css"></link><link rel="stylesheet" href="../styles/theme/components/button/bundle.css"></link><link rel="stylesheet" href="../styles/theme/layout/bundle.css"></link><link rel="stylesheet" href="../styles/nord-light.css"></link><link rel="stylesheet" href="../styles/dotty-icons.css"></link><link rel="stylesheet" href="../styles/filter-bar.css"></link><link rel="stylesheet" href="../styles/code-snippets.css"></link><link rel="stylesheet" href="../styles/searchbar.css"></link><link rel="stylesheet" href="../styles/social-links.css"></link><link rel="stylesheet" href="../styles/versions-dropdown.css"></link><link rel="stylesheet" href="../styles/content-contributors.css"></link><link rel="stylesheet" href="../styles/fontawesome.css"></link><script type="text/javascript" src="../hljs/highlight.pack.js" defer="true"></script><script type="text/javascript" src="../scripts/hljs-scala3.js" defer="true"></script><script type="text/javascript" src="../scripts/ux.js" defer="true"></script><script type="text/javascript" src="../scripts/common/component.js" defer="true"></script><script type="text/javascript" src="../scripts/common/utils.js" defer="true"></script><script type="text/javascript" src="../scripts/components/FilterBar.js" defer="true"></script><script type="text/javascript" src="../scripts/components/DocumentableList.js" defer="true"></script><script type="text/javascript" src="../scripts/components/Input.js" defer="true"></script><script type="text/javascript" src="../scripts/components/FilterGroup.js" defer="true"></script><script type="text/javascript" src="../scripts/components/Filter.js" defer="true"></script><script type="text/javascript" src="../scripts/scaladoc-scalajs.js" defer="true"></script><script type="text/javascript" src="../scripts/contributors.js" defer="true"></script><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" defer="true"></script><script type="text/javascript" src="https://d3js.org/d3.v6.min.js" defer="true"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/graphlib-dot@0.6.2/dist/graphlib-dot.min.js" defer="true"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dagre-d3/0.6.1/dagre-d3.min.js" defer="true"></script><script type="text/javascript" src="https://scastie.scala-lang.org/embedded.js" defer="true"></script><script type="text/javascript" src="../scripts/data.js" defer="true"></script><link rel="stylesheet" href="../styles/apistyles.css"></link><script>var pathToRoot = "../";</script></head><body><div id=""><div id="header" class="body-small"><div class="header-container-left"><a href="../" class="logo-container"><span class="project-name h300">root</span></a><span onclick="dropdownHandler(event)" class="text-button with-arrow" id="dropdown-trigger"><a></a></span><div id="version-dropdown" class="dropdown-menu"></div></div><div class="header-container-right"><button id="search-toggle" class="icon-button"></button><span id="theme-toggle" class="icon-button"></span><span id="mobile-menu-toggle" class="icon-button hamburger"></span></div></div><div id="mobile-menu"><div class="mobile-menu-header body-small"><span class="mobile-menu-logo"><span class="project-name h300">root</span></span><button id="mobile-menu-close" class="icon-button close"></button></div><div class="mobile-menu-container body-medium"><input id="mobile-scaladoc-searchbar-input" class="scaladoc-searchbar-input" type="search" placeholder="Find anything"></input><span id="mobile-theme-toggle" class="mobile-menu-item mode"></span></div></div><span id="mobile-sidebar-toggle" class="floating-button"></span><div id="leftColumn" class="body-small"><div class="switcher-container"><a id="api-nav-button" class="switcher h100 selected" href="../index.html">API</a></div><nav id="api-nav" class="side-menu"><div class="ni n0 expanded"><span class="nh h100 expanded cs"><button class="ar icon-button expanded"></button><a href="../foresight.html"><span class="micon pa"></span><span>foresight</span></a></span><div class="ni n1 expanded"><span class="nh h100 selected"><button class="ar icon-button expanded"></button><a href="#"><span class="micon pa"></span><span>eqsat</span></a></span><div class="ni n2"><span class="nh "><button class="ar icon-button "></button><a href="eqsat/commands.html"><span class="micon pa"></span><span>commands</span></a></span><div class="ni n3 "><span class="nh "><a href="eqsat/commands/AddManyCommand.html"><span class="micon cl"></span><span>AddManyCommand</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/commands/Command.html"><span class="micon tr"></span><span>Command</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/commands/Command$.html"><span class="micon ob"></span><span>Command</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/commands/CommandQueue.html"><span class="micon cl"></span><span>CommandQueue</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/commands/CommandQueue$.html"><span class="micon ob"></span><span>CommandQueue</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/commands/CommandQueueBuilder.html"><span class="micon cl"></span><span>CommandQueueBuilder</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/commands/EClassSymbol.html"><span class="micon tr"></span><span>EClassSymbol</span></a></span></div><div class="ni n3"><span class="nh "><button class="ar icon-button "></button><a href="eqsat/commands/EClassSymbol$.html"><span class="micon ob"></span><span>EClassSymbol</span></a></span><div class="ni n4 "><span class="nh "><a href="eqsat/commands/EClassSymbol$$Real.html"><span class="micon cl"></span><span>Real</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/commands/EClassSymbol$$Virtual.html"><span class="micon cl"></span><span>Virtual</span></a></span></div></div><div class="ni n3 "><span class="nh "><a href="eqsat/commands/ENodeSymbol.html"><span class="micon cl"></span><span>ENodeSymbol</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/commands/UnionManyCommand.html"><span class="micon cl"></span><span>UnionManyCommand</span></a></span></div></div><div class="ni n2"><span class="nh "><button class="ar icon-button "></button><a href="eqsat/extraction.html"><span class="micon pa"></span><span>extraction</span></a></span><div class="ni n3 "><span class="nh "><a href="eqsat/extraction/CostFunction.html"><span class="micon tr"></span><span>CostFunction</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/extraction/ExtractionAnalysis.html"><span class="micon cl"></span><span>ExtractionAnalysis</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/extraction/ExtractionAnalysis$.html"><span class="micon ob"></span><span>ExtractionAnalysis</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/extraction/ExtractionTree.html"><span class="micon cl"></span><span>ExtractionTree</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/extraction/ExtractionTreeCall.html"><span class="micon cl"></span><span>ExtractionTreeCall</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/extraction/ExtractionTreeOrdering.html"><span class="micon cl"></span><span>ExtractionTreeOrdering</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/extraction/Extractor.html"><span class="micon tr"></span><span>Extractor</span></a></span></div></div><div class="ni n2"><span class="nh "><button class="ar icon-button "></button><a href="eqsat/metadata.html"><span class="micon pa"></span><span>metadata</span></a></span><div class="ni n3 "><span class="nh "><a href="eqsat/metadata/Analysis.html"><span class="micon tr"></span><span>Analysis</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/metadata/AnalysisMetadata.html"><span class="micon cl"></span><span>AnalysisMetadata</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/metadata/Metadata.html"><span class="micon tr"></span><span>Metadata</span></a></span></div></div><div class="ni n2"><span class="nh "><button class="ar icon-button "></button><a href="eqsat/parallel.html"><span class="micon pa"></span><span>parallel</span></a></span><div class="ni n3 "><span class="nh "><a href="eqsat/parallel/CancellationToken.html"><span class="micon cl"></span><span>CancellationToken</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/parallel/OperationCanceledException.html"><span class="micon cl"></span><span>OperationCanceledException</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/parallel/ParallelMap.html"><span class="micon tr"></span><span>ParallelMap</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/parallel/ParallelMap$.html"><span class="micon ob"></span><span>ParallelMap</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/parallel/TimedParallelMap.html"><span class="micon cl"></span><span>TimedParallelMap</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/parallel/TimingReport.html"><span class="micon cl"></span><span>TimingReport</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/parallel/TimingReport$.html"><span class="micon ob"></span><span>TimingReport</span></a></span></div></div><div class="ni n2"><span class="nh "><button class="ar icon-button "></button><a href="eqsat/rewriting.html"><span class="micon pa"></span><span>rewriting</span></a></span><div class="ni n3"><span class="nh "><button class="ar icon-button "></button><a href="eqsat/rewriting/patterns.html"><span class="micon pa"></span><span>patterns</span></a></span><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/patterns/CompiledPattern.html"><span class="micon cl"></span><span>CompiledPattern</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/patterns/CompiledPattern$.html"><span class="micon ob"></span><span>CompiledPattern</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/patterns/Instruction.html"><span class="micon tr"></span><span>Instruction</span></a></span></div><div class="ni n4"><span class="nh "><button class="ar icon-button "></button><a href="eqsat/rewriting/patterns/Instruction$.html"><span class="micon ob"></span><span>Instruction</span></a></span><div class="ni n5 "><span class="nh "><a href="eqsat/rewriting/patterns/Instruction$$BindNode.html"><span class="micon cl"></span><span>BindNode</span></a></span></div><div class="ni n5 "><span class="nh "><a href="eqsat/rewriting/patterns/Instruction$$BindVar.html"><span class="micon cl"></span><span>BindVar</span></a></span></div><div class="ni n5 "><span class="nh "><a href="eqsat/rewriting/patterns/Instruction$$Compare.html"><span class="micon cl"></span><span>Compare</span></a></span></div></div><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/patterns/Machine$.html"><span class="micon ob"></span><span>Machine</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/patterns/MachineError.html"><span class="micon tr"></span><span>MachineError</span></a></span></div><div class="ni n4"><span class="nh "><button class="ar icon-button "></button><a href="eqsat/rewriting/patterns/MachineError$.html"><span class="micon ob"></span><span>MachineError</span></a></span><div class="ni n5 "><span class="nh "><a href="eqsat/rewriting/patterns/MachineError$$InconsistentVars.html"><span class="micon cl"></span><span>InconsistentVars</span></a></span></div><div class="ni n5 "><span class="nh "><a href="eqsat/rewriting/patterns/MachineError$$NoMatchingNode.html"><span class="micon cl"></span><span>NoMatchingNode</span></a></span></div></div><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/patterns/MachineResult.html"><span class="micon tr"></span><span>MachineResult</span></a></span></div><div class="ni n4"><span class="nh "><button class="ar icon-button "></button><a href="eqsat/rewriting/patterns/MachineResult$.html"><span class="micon ob"></span><span>MachineResult</span></a></span><div class="ni n5 "><span class="nh "><a href="eqsat/rewriting/patterns/MachineResult$$Failure.html"><span class="micon cl"></span><span>Failure</span></a></span></div><div class="ni n5 "><span class="nh "><a href="eqsat/rewriting/patterns/MachineResult$$Success.html"><span class="micon cl"></span><span>Success</span></a></span></div></div><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/patterns/MachineSearcherPhase.html"><span class="micon cl"></span><span>MachineSearcherPhase</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/patterns/MachineState.html"><span class="micon cl"></span><span>MachineState</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/patterns/MachineState$.html"><span class="micon ob"></span><span>MachineState</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/patterns/Pattern.html"><span class="micon tr"></span><span>Pattern</span></a></span></div><div class="ni n4"><span class="nh "><button class="ar icon-button "></button><a href="eqsat/rewriting/patterns/Pattern$.html"><span class="micon ob"></span><span>Pattern</span></a></span><div class="ni n5 "><span class="nh "><a href="eqsat/rewriting/patterns/Pattern$$Var.html"><span class="micon cl"></span><span>Var</span></a></span></div><div class="ni n5 "><span class="nh "><a href="eqsat/rewriting/patterns/Pattern$$Var$.html"><span class="micon ob"></span><span>Var</span></a></span></div></div><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/patterns/PatternApplier.html"><span class="micon cl"></span><span>PatternApplier</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/patterns/PatternCompiler$.html"><span class="micon ob"></span><span>PatternCompiler</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/patterns/PatternMatch.html"><span class="micon cl"></span><span>PatternMatch</span></a></span></div></div><div class="ni n3 "><span class="nh "><a href="eqsat/rewriting/PortableMatch.html"><span class="micon tr"></span><span>PortableMatch</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/rewriting/ReversibleApplier.html"><span class="micon tr"></span><span>ReversibleApplier</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/rewriting/ReversibleSearcher.html"><span class="micon tr"></span><span>ReversibleSearcher</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/rewriting/ReversibleSearcher$.html"><span class="micon ob"></span><span>ReversibleSearcher</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/rewriting/ReversibleSearcherPhase.html"><span class="micon tr"></span><span>ReversibleSearcherPhase</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/rewriting/Searcher.html"><span class="micon tr"></span><span>Searcher</span></a></span></div><div class="ni n3"><span class="nh "><button class="ar icon-button "></button><a href="eqsat/rewriting/Searcher$.html"><span class="micon ob"></span><span>Searcher</span></a></span><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/Searcher$$Filter.html"><span class="micon cl"></span><span>Filter</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/Searcher$$Flatten.html"><span class="micon cl"></span><span>Flatten</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/Searcher$$Map.html"><span class="micon cl"></span><span>Map</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/Searcher$$SearcherOfPatternMatch.html"><span class="micon cl"></span><span>SearcherOfPatternMatch</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/Searcher$$SearcherOfPatternMatchProductOps.html"><span class="micon cl"></span><span>SearcherOfPatternMatchProductOps</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/Searcher$$SearcherOfSeqOfTraversableOps.html"><span class="micon cl"></span><span>SearcherOfSeqOfTraversableOps</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/rewriting/Searcher$$SearcherOfSeqOps.html"><span class="micon cl"></span><span>SearcherOfSeqOps</span></a></span></div></div><div class="ni n3 "><span class="nh "><a href="eqsat/rewriting/SearcherPhase.html"><span class="micon tr"></span><span>SearcherPhase</span></a></span></div></div><div class="ni n2"><span class="nh "><button class="ar icon-button "></button><a href="eqsat/saturation.html"><span class="micon pa"></span><span>saturation</span></a></span><div class="ni n3"><span class="nh "><button class="ar icon-button "></button><a href="eqsat/saturation/priorities.html"><span class="micon pa"></span><span>priorities</span></a></span><div class="ni n4 "><span class="nh "><a href="eqsat/saturation/priorities/CurveFittedPriorities.html"><span class="micon cl"></span><span>CurveFittedPriorities</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/saturation/priorities/MatchPriorities.html"><span class="micon tr"></span><span>MatchPriorities</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/saturation/priorities/PrioritizedMatch.html"><span class="micon cl"></span><span>PrioritizedMatch</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/saturation/priorities/ReweightedPriorities.html"><span class="micon tr"></span><span>ReweightedPriorities</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/saturation/priorities/UniformPriorities.html"><span class="micon cl"></span><span>UniformPriorities</span></a></span></div></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/BackoffRule.html"><span class="micon cl"></span><span>BackoffRule</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/BackoffRuleApplication.html"><span class="micon cl"></span><span>BackoffRuleApplication</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/BackoffRuleStats.html"><span class="micon cl"></span><span>BackoffRuleStats</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/EGraphWithRecordedApplications.html"><span class="micon cl"></span><span>EGraphWithRecordedApplications</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/EGraphWithRecordedApplications$.html"><span class="micon ob"></span><span>EGraphWithRecordedApplications</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/EGraphWithRoot.html"><span class="micon cl"></span><span>EGraphWithRoot</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/EGraphWithRoot$.html"><span class="micon ob"></span><span>EGraphWithRoot</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/MaximalRuleApplication.html"><span class="micon cl"></span><span>MaximalRuleApplication</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/MaximalRuleApplication$.html"><span class="micon ob"></span><span>MaximalRuleApplication</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/MaximalRuleApplicationWithCaching$.html"><span class="micon ob"></span><span>MaximalRuleApplicationWithCaching</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/Rebase.html"><span class="micon cl"></span><span>Rebase</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/Rebase$.html"><span class="micon ob"></span><span>Rebase</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/RuleStats.html"><span class="micon cl"></span><span>RuleStats</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/SearchAndApply.html"><span class="micon tr"></span><span>SearchAndApply</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/SearchAndApply$.html"><span class="micon ob"></span><span>SearchAndApply</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/StochasticRuleApplication.html"><span class="micon cl"></span><span>StochasticRuleApplication</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/StochasticRuleApplication$.html"><span class="micon ob"></span><span>StochasticRuleApplication</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/StochasticRuleApplicationWithCaching$.html"><span class="micon ob"></span><span>StochasticRuleApplicationWithCaching</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/Strategy.html"><span class="micon tr"></span><span>Strategy</span></a></span></div><div class="ni n3"><span class="nh "><button class="ar icon-button "></button><a href="eqsat/saturation/Strategy$.html"><span class="micon ob"></span><span>Strategy</span></a></span><div class="ni n4 "><span class="nh "><a href="eqsat/saturation/Strategy$$WithMetadata.html"><span class="micon cl"></span><span>WithMetadata</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/saturation/Strategy$$WithMetadataAndRoot.html"><span class="micon cl"></span><span>WithMetadataAndRoot</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/saturation/Strategy$$WithRecordedApplications.html"><span class="micon cl"></span><span>WithRecordedApplications</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/saturation/Strategy$$WithRecordingMetadataAndRoot.html"><span class="micon cl"></span><span>WithRecordingMetadataAndRoot</span></a></span></div><div class="ni n4 "><span class="nh "><a href="eqsat/saturation/Strategy$$WithRoot.html"><span class="micon cl"></span><span>WithRoot</span></a></span></div></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/TransformAndRebase.html"><span class="micon cl"></span><span>TransformAndRebase</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/saturation/TransformAndRebase$.html"><span class="micon ob"></span><span>TransformAndRebase</span></a></span></div></div><div class="ni n2 "><span class="nh "><a href="eqsat/AddNodeResult.html"><span class="micon tr"></span><span>AddNodeResult</span></a></span></div><div class="ni n2"><span class="nh "><button class="ar icon-button "></button><a href="eqsat/AddNodeResult$.html"><span class="micon ob"></span><span>AddNodeResult</span></a></span><div class="ni n3 "><span class="nh "><a href="eqsat/AddNodeResult$$Added.html"><span class="micon cl"></span><span>Added</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/AddNodeResult$$AlreadyThere.html"><span class="micon cl"></span><span>AlreadyThere</span></a></span></div></div><div class="ni n2 "><span class="nh "><a href="eqsat/EClassCall.html"><span class="micon cl"></span><span>EClassCall</span></a></span></div><div class="ni n2 "><span class="nh "><a href="eqsat/EClassRef.html"><span class="micon cl"></span><span>EClassRef</span></a></span></div><div class="ni n2 "><span class="nh "><a href="eqsat/EGraph.html"><span class="micon tr"></span><span>EGraph</span></a></span></div><div class="ni n2 "><span class="nh "><a href="eqsat/EGraph$.html"><span class="micon ob"></span><span>EGraph</span></a></span></div><div class="ni n2 "><span class="nh "><a href="eqsat/EGraphLike.html"><span class="micon tr"></span><span>EGraphLike</span></a></span></div><div class="ni n2 "><span class="nh "><a href="eqsat/EGraphWithPendingUnions.html"><span class="micon cl"></span><span>EGraphWithPendingUnions</span></a></span></div><div class="ni n2 "><span class="nh "><a href="eqsat/EGraphWithPendingUnions$.html"><span class="micon ob"></span><span>EGraphWithPendingUnions</span></a></span></div><div class="ni n2 "><span class="nh "><a href="eqsat/ENode.html"><span class="micon cl"></span><span>ENode</span></a></span></div><div class="ni n2 "><span class="nh "><a href="eqsat/ENode$.html"><span class="micon ob"></span><span>ENode</span></a></span></div><div class="ni n2 "><span class="nh "><a href="eqsat/MixedTree.html"><span class="micon tr"></span><span>MixedTree</span></a></span></div><div class="ni n2"><span class="nh "><button class="ar icon-button "></button><a href="eqsat/MixedTree$.html"><span class="micon ob"></span><span>MixedTree</span></a></span><div class="ni n3 "><span class="nh "><a href="eqsat/MixedTree$$Call.html"><span class="micon cl"></span><span>Call</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/MixedTree$$MixedTreeOfEClassCallOps.html"><span class="micon cl"></span><span>MixedTreeOfEClassCallOps</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/MixedTree$$MixedTreeOfPatternOps.html"><span class="micon cl"></span><span>MixedTreeOfPatternOps</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/MixedTree$$Node.html"><span class="micon cl"></span><span>Node</span></a></span></div></div><div class="ni n2 "><span class="nh "><a href="eqsat/Permutation.html"><span class="micon tr"></span><span>Permutation</span></a></span></div><div class="ni n2 "><span class="nh "><a href="eqsat/ShapeCall.html"><span class="micon cl"></span><span>ShapeCall</span></a></span></div><div class="ni n2 "><span class="nh "><a href="eqsat/Slot.html"><span class="micon tr"></span><span>Slot</span></a></span></div><div class="ni n2"><span class="nh "><button class="ar icon-button "></button><a href="eqsat/Slot$.html"><span class="micon ob"></span><span>Slot</span></a></span><div class="ni n3 "><span class="nh "><a href="eqsat/Slot$$NumberedSlot.html"><span class="micon cl"></span><span>NumberedSlot</span></a></span></div><div class="ni n3 "><span class="nh "><a href="eqsat/Slot$$UniqueSlot.html"><span class="micon cl"></span><span>UniqueSlot</span></a></span></div></div><div class="ni n2 "><span class="nh "><a href="eqsat/SlotMap.html"><span class="micon cl"></span><span>SlotMap</span></a></span></div><div class="ni n2 "><span class="nh "><a href="eqsat/SlotMap$.html"><span class="micon ob"></span><span>SlotMap</span></a></span></div><div class="ni n2 "><span class="nh "><a href="eqsat/Tree.html"><span class="micon cl"></span><span>Tree</span></a></span></div><div class="ni n2 "><span class="nh "><a href="eqsat/Tree$.html"><span class="micon ob"></span><span>Tree</span></a></span></div></div><div class="ni n1"><span class="nh "><button class="ar icon-button "></button><a href="util.html"><span class="micon pa"></span><span>util</span></a></span><div class="ni n2"><span class="nh "><button class="ar icon-button "></button><a href="util/collections.html"><span class="micon pa"></span><span>collections</span></a></span><div class="ni n3"><span class="nh "><button class="ar icon-button "></button><a href="util/collections/StrictMapOps$.html"><span class="micon ob"></span><span>StrictMapOps</span></a></span><div class="ni n4 "><span class="nh "><a href="util/collections/StrictMapOps$$Ops.html"><span class="micon cl"></span><span>Ops</span></a></span></div></div></div><div class="ni n2"><span class="nh "><button class="ar icon-button "></button><a href="util/ordering.html"><span class="micon pa"></span><span>ordering</span></a></span><div class="ni n3 "><span class="nh "><a href="util/ordering/SeqOrdering$.html"><span class="micon ob"></span><span>SeqOrdering</span></a></span></div></div><div class="ni n2"><span class="nh "><button class="ar icon-button "></button><a href="util/random.html"><span class="micon pa"></span><span>random</span></a></span><div class="ni n3 "><span class="nh "><a href="util/random/DiscreteDistribution.html"><span class="micon tr"></span><span>DiscreteDistribution</span></a></span></div><div class="ni n3 "><span class="nh "><a href="util/random/Random.html"><span class="micon tr"></span><span>Random</span></a></span></div><div class="ni n3 "><span class="nh "><a href="util/random/Random$.html"><span class="micon ob"></span><span>Random</span></a></span></div><div class="ni n3 "><span class="nh "><a href="util/random/Sample$.html"><span class="micon ob"></span><span>Sample</span></a></span></div><div class="ni n3 "><span class="nh "><a href="util/random/ShiftedGeometricDistribution.html"><span class="micon cl"></span><span>ShiftedGeometricDistribution</span></a></span></div></div></div></div></nav></div><div id="footer" class="body-small"><div class="left-container">Generated with</div><div class="right-container"><div class="text"></div></div><div class="text-mobile"></div></div><div id="scaladoc-searchBar"></div><div id="main"><div class="breadcrumbs container"><a href="../index.html">root</a>/<a href="../foresight.html">foresight</a>/<a href="eqsat.html">foresight.eqsat</a></div><div id="content" class="body-medium"><div><div class="cover-header">
 <span class="icon"><span class="micon pa"></span></span>
 <h1 class="h600 single">foresight.eqsat</h1>
</div>
<div class="fqname body-large">
 <span></span>
</div>
<div class="main-signature mono-small-block">
 <div class="signature">
  <span class="modifiers"></span><span class="kind"><span t="k">package </span></span><a href="eqsat.html" t="n" class="documentableName ">foresight.eqsat</a>
 </div>
</div>
<div class="cover">
 <div class="doc">
  <p>The root of Foresight's equality saturation framework. It provides immutable e-graph data structures, symbolic references, slot-based binding semantics, and core interfaces for search, application, and extraction.</p>
  <p>An <strong>e-graph</strong> represents equivalence classes of expressions, or <em>e-classes</em>, each containing multiple <em>e-nodes</em> that differ in structure but are semantically equal. This representation supports efficient, parallel, and reversible rewrite-driven optimization, with explicit tracking of symbolic bindings (<em>slots</em>) and rich metadata.</p>
  <p>E-graphs in Foresight are purely functional: every operation returns a new value rather than mutating in place. This immutability underpins reproducibility, concurrent analysis, and caching across snapshots.</p>
  <h2><a href="#core-concepts" id="core-concepts">Core Concepts</a></h2>
  <p>At the heart of the API are symbolic identifiers and slot-based binding. An <a href="eqsat/EClassRef.html">eqsat.EClassRef</a> is a reference to an e-class within a particular e-graph snapshot. Over time, merges may cause multiple references to point to the same canonical e-class, so callers should normalize them with <a href="eqsat/EGraphLike.html#canonicalize-d24">eqsat.EGraphLike.canonicalize</a>. An <a href="eqsat/EClassCall.html">eqsat.EClassCall</a> couples a root reference with a total slot map, allowing the same structural e-class to be applied with different bindings. A <a href="eqsat/Slot.html">eqsat.Slot</a> identifies a bound variable in an expression, and a <a href="eqsat/SlotMap.html">eqsat.SlotMap</a> gives a complete mapping from slots to other slots or values.</p>
  <h2><a href="#egraph-and-egraphlike" id="egraph-and-egraphlike">EGraph and EGraphLike</a></h2>
  <p><a href="eqsat/EGraphLike.html">eqsat.EGraphLike</a> is the fundamental, immutable e-graph interface, F-bounded over its concrete self type so that core operations like adding nodes, merging classes, and emptying the graph return the most precise implementation type rather than a generic supertype. This enables fluent, type-safe composition without casting. <a href="eqsat/EGraph.html">eqsat.EGraph</a> is the default public form of an e-graph, defined simply as <code>EGraph[NodeT] extends EGraphLike[NodeT, EGraph[NodeT]]</code>. The companion object offers convenient constructors such as <code>EGraph.empty</code> for building a new graph, or <code>EGraph.from(tree)</code> for inserting a <a href="eqsat/MixedTree.html">eqsat.MixedTree</a> into a fresh graph and returning its root call.</p>
  <p>Canonicalization and identity management are central to working with e-graphs. Methods like <code>canonicalize(ref)</code> return the leader representative for an <a href="eqsat/EClassRef.html">eqsat.EClassRef</a>, reflecting all unions so far. The graph can answer membership queries (<code>contains</code>) and retrieve the e-class containing a given <a href="eqsat/ENode.html">eqsat.ENode</a>. Batch operations like <code>tryAddMany</code> and <code>unionMany</code> allow for inserting multiple nodes or merging multiple classes in one pass, improving efficiency and reducing intermediate rebuilding. For workflows where merges are staged, the simpler <code>union</code> defers merging until the next rebuild.</p>
  <p><a href="eqsat/EGraphLike.html">eqsat.EGraphLike</a> also supports interoperability and reuse. Wrapping an instance with <code>withMetadata</code> enables automatic tracking of registered metadata analyses. Calling <code>emptied</code> produces a configuration-equivalent graph with all content removed, which is useful when repeating a pipeline on fresh inputs without reconstructing the entire environment.</p>
  <h2><a href="#subpackages" id="subpackages">Subpackages</a></h2>
  <p>The <code>foresight.eqsat.commands</code> package defines a system for batching and replaying e-graph edits. Commands are immutable descriptions of insertions, merges, and other structural changes, which can be staged and optimized before execution.</p>
  <p>The <code>foresight.eqsat.extraction</code> package turns e-classes into concrete expression trees using cost models. It computes minimal-cost trees for each class and carries a slot renaming to ensure context validity. These analyses are deterministic and fully parametric over cost type and node ordering.</p>
  <p>The <code>foresight.eqsat.metadata</code> package attaches derived information to e-graphs and keeps it incrementally updated. This includes both general-purpose metadata managers and semilattice-style analyses. The <code>EGraphWithMetadata</code> wrapper ensures consistency after additions and merges.</p>
  <p>The <code>foresight.eqsat.parallel</code> package provides composable parallelism utilities. <a href="eqsat/parallel/ParallelMap.html">foresight.eqsat.parallel.ParallelMap</a> defines the core mapping strategy interface, with sequential, parallel, and fixed-thread variants, plus wrappers for cooperative cancellation and hierarchical timing.</p>
  <p>The <code>foresight.eqsat.rewriting</code> package implements the search–apply pipeline for equality saturation. Searchers find matches, appliers produce commands, and rules combine them into optimized batches. Features like reversal and match portability enable bidirectional reasoning and cross-snapshot caching.</p>
  <p>The <code>foresight.eqsat.saturation</code> package orchestrates rewrite application at scale. A <a href="eqsat/saturation/Strategy.html">foresight.eqsat.saturation.Strategy</a> composes search–apply steps into full saturation runs, with variants for maximal application, stochastic selection, backoff quotas, caching, and rebasing.</p>
  <h2><a href="#design-principles" id="design-principles">Design Principles</a></h2>
  <p>All core data types are persistent values: applying a command, running a rule, or performing extraction yields a new e-graph or analysis result without modifying the original. Symbolic planning is encouraged—commands and calls are constructed over symbolic identifiers and slot mappings, making it possible to plan transformations before runtime IDs are known. Extraction, rewriting, and saturation are parametric over cost types and node orderings, allowing the same framework to target latency minimization, code size reduction, or other goals. Parallelism and cooperative cancellation are explicit in the API: major batch operations accept a <a href="eqsat/parallel/ParallelMap.html">foresight.eqsat.parallel.ParallelMap</a>, avoiding hidden threading behavior.</p>
 </div>
 <section id="attributes">
  <h2 class="h500">Attributes</h2>
  <dl class="attributes">
   <dt class="body-small">
    Example
   </dt>
   <dd class="body-medium">
    <div>
     <div>
      <div class="snippet mono-small-block">
       <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>import foresight.eqsat._
</span><span line-number="2" class=""><span class="tooltip-container"></span>import foresight.eqsat.commands._
</span><span line-number="3" class=""><span class="tooltip-container"></span>import foresight.eqsat.rewriting._
</span><span line-number="4" class=""><span class="tooltip-container"></span>import foresight.eqsat.saturation._
</span><span line-number="5" class=""><span class="tooltip-container"></span>// Create an empty e-graph for a custom node type
</span><span line-number="6" class=""><span class="tooltip-container"></span>val g0: EGraph[MyNode] = EGraph.empty
</span><span line-number="7" class=""><span class="tooltip-container"></span>// Build a command queue
</span><span line-number="8" class=""><span class="tooltip-container"></span>val builder = new CommandQueueBuilder[MyNode]
</span><span line-number="9" class=""><span class="tooltip-container"></span>val root    = builder.add(myENode)
</span><span line-number="10" class=""><span class="tooltip-container"></span>val queue   = builder.queue.optimized
</span><span line-number="11" class=""><span class="tooltip-container"></span>// Apply commands to produce a new graph
</span><span line-number="12" class=""><span class="tooltip-container"></span>val (g1, reif) = queue(g0, Map.empty, ParallelMap.sequential)
</span><span line-number="13" class=""><span class="tooltip-container"></span>// Run a saturation strategy
</span><span line-number="14" class=""><span class="tooltip-container"></span>val rules: Seq[Rule[MyNode, MyMatch, MyEGraph]] = Seq(r1, r2)
</span><span line-number="15" class=""><span class="tooltip-container"></span>val strat = MaximalRuleApplicationWithCaching(rules).repeatUntilStable
</span><span line-number="16" class=""><span class="tooltip-container"></span>val result = strat.run(g1)
</span></code></pre>
       <div class="buttons"></div>
      </div>
     </div>
    </div>
   </dd>
  </dl>
 </section>
</div>
<section id="members-list">
 <h2 class="h500">Members list</h2>
 <div class="documentableFilter">
  <div class="filtersContainer"></div><input class="filterableInput" placeholder="Filter by any phrase" data-test-id="filterBarInput" type="search"><button class="clearButton label-only-button" data-test-id="filterBarClearButton">Clear all</button>
 </div>
 <div class="membersList expand">
  <div class="tabs">
   <div class="contents">
    <section id="Packages">
     <div data-togglable="packages" class="tab expand">
      <div class="documentableList expand">
       <div class="documentableList-expander">
        <button class="icon-button show-content expand"></button>
        <h3 class="groupHeader h400">Packages</h3>
       </div>
       <div class="documentableElement">
        <div class="documentableElement-expander">
         <button class="icon-button ar show-content"></button>
         <div class="header monospace mono-medium">
          <div class="signature">
           <span class="modifiers"></span><span class="kind"><span t="k">package </span></span><a href="eqsat/commands.html" t="n" class="documentableName ">foresight.eqsat.commands</a>
          </div>
         </div>
        </div>
        <div class="docs">
         <span class="modifiers"></span>
         <div>
          <div class="originInfo"></div>
          <div class="memberDocumentation">
           <div class="documentableBrief doc">
            <p>Defines the command system for making batched, replayable edits to an <a href="eqsat/EGraph.html">EGraph</a>.</p>
           </div>
           <div class="cover">
            <div class="doc">
             <p>Defines the command system for making batched, replayable edits to an <a href="eqsat/EGraph.html">EGraph</a>.</p>
             <p>A <a href="eqsat/commands/Command.html">commands.Command</a> is an immutable description of a single edit, such as inserting one or more nodes (<a href="eqsat/commands/AddManyCommand.html">commands.AddManyCommand</a>) or merging e-classes (<a href="eqsat/commands/UnionManyCommand.html">commands.UnionManyCommand</a>).</p>
             <p>Commands are:</p>
             <ul>
              <li><strong>pure values</strong> that do not mutate an e-graph until <a href="eqsat/commands/Command.html#apply-fffff2e4">commands.Command.apply</a></li>
              <li><strong>self-describing</strong>: they declare their required inputs (<a href="eqsat/commands/Command.html#uses-0">commands.Command.uses</a>) and any new virtual symbols they define (<a href="eqsat/commands/Command.html#definitions-0">commands.Command.definitions</a>)</li>
              <li><strong>optimizable</strong>: they can simplify themselves for a given e-graph (<a href="eqsat/commands/Command.html#simplify-ed0">commands.Command.simplify</a>)</li>
             </ul>
             <h2><a href="#symbols-and-reification" id="symbols-and-reification">Symbols and Reification</a></h2>
             <p>Commands refer to e-classes symbolically via <a href="eqsat/commands/EClassSymbol.html">commands.EClassSymbol</a>:</p>
             <ul>
              <li><a href="eqsat/commands/EClassSymbol$$Real.html">commands.EClassSymbol.Real</a> for existing classes</li>
              <li><a href="eqsat/commands/EClassSymbol$$Virtual.html">commands.EClassSymbol.Virtual</a> for classes not yet in the graph</li>
             </ul>
             <p>When a command is applied, virtual symbols are mapped to real classes using a <strong>reification map</strong> (<code>Map[Virtual, EClassCall]</code>). This allows command sequences to be planned without knowing concrete IDs upfront.</p>
             <h2><a href="#batching-and-composition" id="batching-and-composition">Batching and Composition</a></h2>
             <p>Most real edits involve more than one command. The package provides:</p>
             <ul>
              <li>
               <p><a href="eqsat/commands/CommandQueue.html">commands.CommandQueue</a> — an immutable batch of commands that itself implements <a href="eqsat/commands/Command.html">commands.Command</a>, so queues can be nested or chained.</p></li>
              <li>
               <p><a href="eqsat/commands/CommandQueueBuilder.html">commands.CommandQueueBuilder</a> — a mutable helper for incrementally building a queue without reassigning after each append.</p></li>
             </ul>
             <p>Queues can be:</p>
             <ul>
              <li><strong>simplified</strong>: removing redundant unions, skipping inserts for already-present nodes</li>
              <li><strong>optimized</strong>: merging independent commands for fewer graph rebuilds</li>
             </ul>
             <h2><a href="#common-command-types" id="common-command-types">Common Command Types</a></h2>
             <ul>
              <li>
               <p><a href="eqsat/commands/AddManyCommand.html">commands.AddManyCommand</a> — inserts one or more <a href="eqsat/commands/ENodeSymbol.html">commands.ENodeSymbol</a>s, each paired with the <a href="eqsat/commands/EClassSymbol$$Virtual.html">commands.EClassSymbol.Virtual</a> that will represent its resulting class.</p></li>
              <li>
               <p><a href="eqsat/commands/UnionManyCommand.html">commands.UnionManyCommand</a> — unifies multiple pairs of e-classes at once.</p></li>
              <li>
               <p><a href="eqsat/commands/CommandQueue.html">commands.CommandQueue</a> — sequences arbitrary commands and can itself be nested inside other queues.</p></li>
             </ul>
             <h2><a href="#example" id="example">Example</a></h2>
             <div class="snippet mono-small-block">
              <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>import foresight.eqsat.commands._
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val builder = new CommandQueueBuilder[MyNode]
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>// Add a tree and get its root symbol
</span><span line-number="6" class=""><span class="tooltip-container"></span>val root = builder.add(myTree)
</span><span line-number="7" class=""><span class="tooltip-container"></span>
</span><span line-number="8" class=""><span class="tooltip-container"></span>// Add a dependent node
</span><span line-number="9" class=""><span class="tooltip-container"></span>val depNode = ENodeSymbol(op, Nil, Nil, Seq(root))
</span><span line-number="10" class=""><span class="tooltip-container"></span>val depSym = builder.add(depNode)
</span><span line-number="11" class=""><span class="tooltip-container"></span>
</span><span line-number="12" class=""><span class="tooltip-container"></span>// Request a union of the two classes
</span><span line-number="13" class=""><span class="tooltip-container"></span>builder.union(root, depSym)
</span><span line-number="14" class=""><span class="tooltip-container"></span>
</span><span line-number="15" class=""><span class="tooltip-container"></span>// Get the queue, optimize it, and apply it
</span><span line-number="16" class=""><span class="tooltip-container"></span>val queue = builder.queue.optimized
</span><span line-number="17" class=""><span class="tooltip-container"></span>val (maybeNewGraph, reif) = queue.apply(egraph, Map.empty, parallel)
</span></code></pre>
              <div class="buttons"></div>
             </div>
             <h2><a href="#lifecycle" id="lifecycle">Lifecycle</a></h2>
             <ol>
              <li><strong>Build</strong> — construct commands via <code>AddManyCommand</code>, <code>UnionManyCommand</code>, or convenience methods in <a href="eqsat/commands/CommandQueue.html">commands.CommandQueue</a> / <a href="eqsat/commands/CommandQueueBuilder.html">commands.CommandQueueBuilder</a>.</li>
              <li><strong>Simplify</strong> — run <code>simplify(egraph, partialMap)</code> to drop redundant work and pre-bind resolvable symbols.</li>
              <li><strong>Optimize</strong> — call <code>optimized</code> on queues to merge unions and batch adds.</li>
              <li><strong>Apply</strong> — run <code>apply(egraph, reification, parallelMap)</code> to produce an updated graph.</li>
             </ol>
            </div>
            <h2 class="h200">Attributes</h2>
            <dl class="attributes attributes-small"></dl>
           </div>
          </div>
         </div>
        </div>
       </div>
       <div class="documentableElement">
        <div class="documentableElement-expander">
         <button class="icon-button ar show-content"></button>
         <div class="header monospace mono-medium">
          <div class="signature">
           <span class="modifiers"></span><span class="kind"><span t="k">package </span></span><a href="eqsat/extraction.html" t="n" class="documentableName ">foresight.eqsat.extraction</a>
          </div>
         </div>
        </div>
        <div class="docs">
         <span class="modifiers"></span>
         <div>
          <div class="originInfo"></div>
          <div class="memberDocumentation">
           <div class="documentableBrief doc">
            <p>Tools for turning e-graph e-classes into concrete expression trees using a pluggable, bottom-up cost model. This package is agnostic to the meaning of cost and to the concrete e-graph representation; it works with any immutable <code>EGraph</code> that provides the required metadata.</p>
           </div>
           <div class="cover">
            <div class="doc">
             <p>Tools for turning e-graph e-classes into concrete expression trees using a pluggable, bottom-up cost model. This package is agnostic to the meaning of cost and to the concrete e-graph representation; it works with any immutable <code>EGraph</code> that provides the required metadata.</p>
             <h2><a href="#design" id="design">Design</a></h2>
             <p>Extraction is a two-step process. First, an analysis computes, for every e-class, a minimal (under a user-defined ordering) cost-annotated tree together with a total slot renaming that makes the tree valid in context. Second, an extractor projects that analysis result into a plain expression tree.</p>
             <p>E-graphs in Foresight are immutable. All APIs return new values; nothing mutates in place. Slot renamings are explicit, total mappings applied during materialization.</p>
             <h2><a href="#key-abstractions" id="key-abstractions">Key abstractions</a></h2>
             <p><code>CostFunction[NodeT, C]</code> defines the node-local cost model. Given a node’s operator, its locally defined/used slots, and already-costed children, it returns a cost of type <code>C</code>. The cost may be numeric, tuple-based, or any type with an implicit <code>Ordering[C]</code>.</p>
             <p><code>ExtractionAnalysis[NodeT, C]</code> runs over an e-graph to compute, per e-class, an <code>ExtractionTreeCall[NodeT, C]</code> that minimizes cost and then applies deterministic tie-breaking. The analysis requires <code>Ordering[C]</code> and <code>Ordering[NodeT]</code>. Helpers like <code>ExtractionAnalysis.smallest</code> and <code>ExtractionAnalysis.shallowest</code> are provided.</p>
             <p><code>ExtractionTree[NodeT, C]</code> is an immutable, cost-annotated tree: it stores the root operator, definitions/uses, children, total cost, size, and depth.</p>
             <p><code>ExtractionTreeCall[NodeT, C]</code> pairs an <code>ExtractionTree</code> with a total <code>SlotMap</code> (alpha-renaming) over the tree’s slots. It supports composition of renamings and applying them to produce a renamed tree.</p>
             <p><code>ExtractionTreeOrdering[NodeT, C]</code> defines the total order used for selection and tie-breaking. Comparison is lexicographic over: cost → size → depth → nodeType → definitions → uses → args.</p>
             <h2><a href="#typical-workflow" id="typical-workflow">Typical workflow</a></h2>
             <ol>
              <li>Define a <code>CostFunction</code> that reflects your objective (e.g., node count, height, latency).</li>
              <li>Build an <code>ExtractionAnalysis(name, cost)</code> with implicit <code>Ordering[C]</code> and <code>Ordering[NodeT]</code> in scope.</li>
              <li>Obtain an <code>Extractor</code> via <code>analysis.extractor</code>, then call it with an <code>EClassCall</code> (or a <code>MixedTree</code>, which gets added to a derived graph) to get a plain <code>Tree</code>.</li>
             </ol>
             <h2><a href="#determinism-and-tie-breaking" id="determinism-and-tie-breaking">Determinism and tie-breaking</a></h2>
             <p>Two trees with equal cost are ordered by structure and <code>nodeType</code> using the provided <code>Ordering[NodeT]</code>, then by slot sequences and children, yielding deterministic results.</p>
             <h2><a href="#slots-and-renaming" id="slots-and-renaming">Slots and renaming</a></h2>
             <p>Slots bound at a node are listed in <code>definitions</code>; externally provided ones are in <code>uses</code>. An <code>ExtractionTreeCall</code> carries a total renaming over the tree’s <code>slotSet</code>. Composition methods ensure the mapping remains total when threading results through callers.</p>
            </div>
            <h2 class="h200">Attributes</h2>
            <dl class="attributes attributes-small">
             <dt class="body-small">
              Example
             </dt>
             <dd class="body-medium">
              <div>
               <div>
                <div class="snippet mono-small-block">
                 <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>implicit val costOrd: Ordering[Int] = Ordering.Int
</span><span line-number="2" class=""><span class="tooltip-container"></span>implicit val nodeOrd: Ordering[Op]  = Op.ordering
</span><span line-number="3" class=""><span class="tooltip-container"></span>val analysis   = extraction.ExtractionAnalysis.smallest[Op]
</span><span line-number="4" class=""><span class="tooltip-container"></span>val extractor  = analysis.extractor[MyEGraph]
</span><span line-number="5" class=""><span class="tooltip-container"></span>val bestTree   = extractor(eclassCall, egraphWithMetadata) // Tree[Op]
</span></code></pre>
                 <div class="buttons"></div>
                </div>
               </div>
              </div>
             </dd>
            </dl>
           </div>
          </div>
         </div>
        </div>
       </div>
       <div class="documentableElement">
        <div class="documentableElement-expander">
         <button class="icon-button ar show-content"></button>
         <div class="header monospace mono-medium">
          <div class="signature">
           <span class="modifiers"></span><span class="kind"><span t="k">package </span></span><a href="eqsat/metadata.html" t="n" class="documentableName ">foresight.eqsat.metadata</a>
          </div>
         </div>
        </div>
        <div class="docs">
         <span class="modifiers"></span>
         <div>
          <div class="originInfo"></div>
          <div class="memberDocumentation">
           <div class="documentableBrief doc">
            <p>Provides a functional framework for attaching metadata to an <a href="eqsat/EGraph.html">foresight.eqsat.EGraph</a> and keeping it in sync as the graph evolves. It covers both general-purpose metadata and dataflow-style analyses.</p>
           </div>
           <div class="cover">
            <div class="doc">
             <p>Provides a functional framework for attaching metadata to an <a href="eqsat/EGraph.html">foresight.eqsat.EGraph</a> and keeping it in sync as the graph evolves. It covers both general-purpose metadata and dataflow-style analyses.</p>
             <h2><a href="#overview" id="overview">Overview</a></h2>
             <p>Metadata represents any derived information that depends on the structure of the e-graph, such as statistics, summaries, or precomputed auxiliary data. This package makes it possible to keep such metadata up-to-date automatically as nodes are inserted or e-classes are merged.</p>
             <p>Two main usage patterns are supported. The first is direct use of the <a href="eqsat/metadata/Metadata.html">foresight.eqsat.metadata.Metadata</a> trait, which defines how to update a metadata value incrementally when the e-graph changes. The second is the <a href="eqsat/metadata/Analysis.html">foresight.eqsat.metadata.Analysis</a> API, which allows you to describe a dataflow-like transfer function and a join operation over e-classes, and then evaluate it to a fixpoint. The results of an analysis are stored in an <a href="eqsat/metadata/AnalysisMetadata.html">foresight.eqsat.metadata.AnalysisMetadata</a> object, which itself implements <a href="eqsat/metadata/Metadata.html">Metadata</a>.</p>
             <p>The <span data-unresolved-link="">foresight.eqsat.metadata.EGraphWithMetadata</span> wrapper is the central tool for managing metadata. It wraps an e-graph and ensures that all registered metadata instances are updated in response to changes in the graph. You can register either general-purpose metadata managers or the results of analyses.</p>
             <h2><a href="#lifecycle-and-consistency" id="lifecycle-and-consistency">Lifecycle and Consistency</a></h2>
             <p>All metadata is managed functionally. Update operations never mutate the metadata in place; instead, they return a new metadata instance that reflects the current state of the e-graph. The old instance remains valid and usable. When an operation like <span data-unresolved-link="">foresight.eqsat.metadata.EGraphWithMetadata.tryAddMany</span> or <span data-unresolved-link="">foresight.eqsat.metadata.EGraphWithMetadata.unionMany</span> is performed, the underlying e-graph is updated first. Only then are the registered metadata managers invoked, with the post-update graph as their reference.</p>
             <p>Batches of changes are treated as unordered sets. Metadata implementations produce the same result regardless of the order in which changes are listed.</p>
             <h2><a href="#concurrency" id="concurrency">Concurrency</a></h2>
             <p>Many update methods accept a <a href="eqsat/parallel/ParallelMap.html">foresight.eqsat.parallel.ParallelMap</a> argument, which allows work to be parallelized across multiple items in a batch. Metadata implementations can use this to speed up expensive updates, but correctness must never depend on parallelism. All code must also be safe to run sequentially.</p>
             <h2><a href="#designing-an-analysis" id="designing-an-analysis">Designing an Analysis</a></h2>
             <p>An <a href="eqsat/metadata/Analysis.html">foresight.eqsat.metadata.Analysis</a> is defined by three main operations. The <code>make</code> method acts as a transfer function from a node (and its argument results) to a new analysis result. The <code>join</code> method combines two results for the same e-class into one, and must satisfy the usual semilattice laws of associativity, commutativity, and idempotence to ensure convergence and order independence. The <code>rename</code> method applies alpha-renaming to slot identifiers inside a result, allowing the result to be specialized to a particular e-class application.</p>
             <p>The <code>apply</code> method on an analysis runs it over the entire e-graph, producing an <a href="eqsat/metadata/AnalysisMetadata.html">foresight.eqsat.metadata.AnalysisMetadata</a> object that can be queried for results and updated incrementally as the graph changes.</p>
             <h2><a href="#quickstart" id="quickstart">Quickstart</a></h2>
             <div class="snippet mono-small-block">
              <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>import foresight.eqsat._
</span><span line-number="2" class=""><span class="tooltip-container"></span>import foresight.eqsat.metadata._
</span><span line-number="3" class=""><span class="tooltip-container"></span>
</span><span line-number="4" class=""><span class="tooltip-container"></span>final case class UsesCount(n: Int)
</span><span line-number="5" class=""><span class="tooltip-container"></span>
</span><span line-number="6" class=""><span class="tooltip-container"></span>object CountUses extends Analysis[MyNode, UsesCount] {
</span><span line-number="7" class=""><span class="tooltip-container"></span> val name = "uses-count"
</span><span line-number="8" class=""><span class="tooltip-container"></span>
</span><span line-number="9" class=""><span class="tooltip-container"></span> def rename(r: UsesCount, _: SlotMap): UsesCount = r
</span><span line-number="10" class=""><span class="tooltip-container"></span> def join(l: UsesCount, r: UsesCount): UsesCount = UsesCount(l.n max r.n)
</span><span line-number="11" class=""><span class="tooltip-container"></span> def make(node: MyNode, defs: Seq[Slot], uses: Seq[Slot], args: Seq[UsesCount]): UsesCount =
</span><span line-number="12" class=""><span class="tooltip-container"></span>   UsesCount(uses.size + args.map(_.n).sum)
</span><span line-number="13" class=""><span class="tooltip-container"></span>}
</span><span line-number="14" class=""><span class="tooltip-container"></span>
</span><span line-number="15" class=""><span class="tooltip-container"></span>val base: EGraph[MyNode] = EGraph.empty
</span><span line-number="16" class=""><span class="tooltip-container"></span>val g0  = EGraphWithMetadata(base).addAnalysis(CountUses)
</span><span line-number="17" class=""><span class="tooltip-container"></span>
</span><span line-number="18" class=""><span class="tooltip-container"></span>val (addResults, g1) = g0.tryAddMany(Seq(/* new ENode[MyNode]s */), ParallelMap.sequential)
</span><span line-number="19" class=""><span class="tooltip-container"></span>val (equivs,    g2)  = g1.unionMany(Seq(/* unions */), ParallelMap.sequential)
</span><span line-number="20" class=""><span class="tooltip-container"></span>
</span><span line-number="21" class=""><span class="tooltip-container"></span>val meta  = CountUses.get(g2)
</span><span line-number="22" class=""><span class="tooltip-container"></span>val call  = /* some EClassCall */
</span><span line-number="23" class=""><span class="tooltip-container"></span>val value = meta(call, g2)
</span></code></pre>
              <div class="buttons"></div>
             </div>
             <h2><a href="#implementing-custom-metadata" id="implementing-custom-metadata">Implementing Custom Metadata</a></h2>
             <p>If your derived information is not naturally expressed as an analysis, you can implement <a href="eqsat/metadata/Metadata.html">foresight.eqsat.metadata.Metadata</a> directly. In <code>onAddMany</code>, update only the portions of the metadata that depend on the newly inserted nodes. In <code>onUnionMany</code>, merge state across unified classes and ensure that any dependent state is revalidated. The <code>emptied</code> method must produce a completely fresh metadata instance with no hidden aliasing.</p>
             <h2><a href="#error-handling" id="error-handling">Error Handling</a></h2>
             <p>Callers are responsible for providing the correct type parameter when retrieving metadata with <span data-unresolved-link="">foresight.eqsat.metadata.EGraphWithMetadata.getMetadata</span>. Analyses must be total and pure, and throw exceptions only for unrecoverable programmer errors.</p>
            </div>
            <h2 class="h200">Attributes</h2>
            <dl class="attributes attributes-small"></dl>
           </div>
          </div>
         </div>
        </div>
       </div>
       <div class="documentableElement">
        <div class="documentableElement-expander">
         <button class="icon-button ar show-content"></button>
         <div class="header monospace mono-medium">
          <div class="signature">
           <span class="modifiers"></span><span class="kind"><span t="k">package </span></span><a href="eqsat/parallel.html" t="n" class="documentableName ">foresight.eqsat.parallel</a>
          </div>
         </div>
        </div>
        <div class="docs">
         <span class="modifiers"></span>
         <div>
          <div class="originInfo"></div>
          <div class="memberDocumentation">
           <div class="documentableBrief doc">
            <p>Parallelism utilities for Foresight.</p>
           </div>
           <div class="cover">
            <div class="doc">
             <p>Parallelism utilities for Foresight.</p>
             <p>This package provides a minimal, composable abstraction for executing collection transforms and ad-hoc tasks with optional cancellation and timing. The design favors clear checkpoints over implicit thread interruption, so that callers control how cooperative cancellation is observed inside their own code.</p>
             <p>Core types:</p>
             <ul>
              <li><a href="eqsat/parallel/ParallelMap.html">ParallelMap</a>: strategy interface for applying a function over a collection, with sequential and parallel implementations, child scoping, and wrappers for cancellation and timing.</li>
              <li><a href="eqsat/parallel/TimedParallelMap.html">TimedParallelMap</a>: decorator that records wall-clock timing for a strategy and its child hierarchy, producing a <a href="eqsat/parallel/TimingReport.html">TimingReport</a>.</li>
              <li><a href="eqsat/parallel/CancellationToken.html">CancellationToken</a>: thread-safe, cooperative cancellation flag with optional timeouts via <code>cancelAfter</code>.</li>
              <li><a href="eqsat/parallel/OperationCanceledException.html">OperationCanceledException</a>: exception thrown when cancellation is observed at a checkpoint.</li>
              <li><a href="eqsat/parallel/TimingReport.html">TimingReport</a>: immutable, hierarchical timing summary with merge and simplify helpers.</li>
             </ul>
             <p>Choosing a strategy:</p>
             <ul>
              <li>Use <a href="eqsat/parallel/ParallelMap$.html#sequential-0">ParallelMap.sequential</a> for tiny inputs, deterministic debugging, or environments without threads.</li>
              <li>Use <a href="eqsat/parallel/ParallelMap$.html#parallel-0">ParallelMap.parallel</a> for general-purpose parallelism with library defaults.</li>
              <li>Use <a href="eqsat/parallel/ParallelMap$.html#fixedThreadParallel-fffff156">ParallelMap.fixedThreadParallel</a> when you need an explicit thread cap.</li>
             </ul>
             <p>Cancellation model:</p>
             <ul>
              <li>Wrap a strategy with <a href="eqsat/parallel/ParallelMap.html#cancelable-fffffcbf">ParallelMap.cancelable</a> and pass a <a href="eqsat/parallel/CancellationToken.html">CancellationToken</a>.</li>
              <li>The wrapper performs checks before starting and before each element.</li>
              <li>Long-running element functions should also poll the token inside <code>f</code> to observe cancellation promptly.</li>
              <li>Typical usage is to arm a timeout with <code>token.cancelAfter(d)</code> and not disarm it.</li>
             </ul>
             <p>Timing and reporting:</p>
             <ul>
              <li>Call <a href="eqsat/parallel/ParallelMap.html#timed-0">ParallelMap.timed</a> or wrap an existing strategy in <a href="eqsat/parallel/TimedParallelMap.html">TimedParallelMap</a> to collect timings.</li>
              <li>Elapsed time is wall-clock across the subtree, not a sum of per-task CPU times.</li>
              <li>Use <a href="eqsat/parallel/TimingReport$.html#simplify-280">TimingReport.simplify</a> to collapse repeated, same-named child nodes; use <a href="eqsat/parallel/TimingReport$.html#merge-1b4">TimingReport.merge</a> to combine reports from multiple runs or shards.</li>
             </ul>
             <p>Threading considerations:</p>
             <ul>
              <li><a href="eqsat/parallel/CancellationToken.html">CancellationToken</a> uses an AtomicBoolean for safe cross-thread visibility without locks.</li>
              <li><a href="eqsat/parallel/TimedParallelMap.html">TimedParallelMap</a> protects its internal state with a lock and is safe to use concurrently.</li>
              <li>Implementations of <a href="eqsat/parallel/ParallelMap.html">ParallelMap</a> may differ in scheduling and resource usage; choose according to workload.</li>
             </ul>
             <p>Examples:</p>
             <p>Simple parallel map with timeout</p>
             <div class="snippet mono-small-block">
              <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>import scala.concurrent.duration._
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val token = new CancellationToken
</span><span line-number="4" class=""><span class="tooltip-container"></span>token.cancelAfter(30.seconds)                           // set-and-forget cancellation
</span><span line-number="5" class=""><span class="tooltip-container"></span>
</span><span line-number="6" class=""><span class="tooltip-container"></span>val pm = ParallelMap.parallel.cancelable(token)
</span><span line-number="7" class=""><span class="tooltip-container"></span>val out = pm(Seq(1, 2, 3), x =&gt; x * x)
</span></code></pre>
              <div class="buttons"></div>
             </div>
             <p>Finer-grained cancellation inside a long-running function</p>
             <div class="snippet mono-small-block">
              <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>def compute(x: Int, token: CancellationToken): Int = {
</span><span line-number="2" class=""><span class="tooltip-container"></span> if (token.isCanceled) throw OperationCanceledException(token)
</span><span line-number="3" class=""><span class="tooltip-container"></span> // ... long step ...
</span><span line-number="4" class=""><span class="tooltip-container"></span> if (token.isCanceled) throw OperationCanceledException(token)
</span><span line-number="5" class=""><span class="tooltip-container"></span> // ... next step ...
</span><span line-number="6" class=""><span class="tooltip-container"></span> x * x
</span><span line-number="7" class=""><span class="tooltip-container"></span>}
</span><span line-number="8" class=""><span class="tooltip-container"></span>
</span><span line-number="9" class=""><span class="tooltip-container"></span>val out = ParallelMap.parallel.cancelable(token)(items, x =&gt; compute(x, token))
</span></code></pre>
              <div class="buttons"></div>
             </div>
             <p>Timing a nested workflow</p>
             <div class="snippet mono-small-block">
              <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>val timed = ParallelMap.parallel.timed
</span><span line-number="2" class=""><span class="tooltip-container"></span>val phase1 = timed.child("phase-1")
</span><span line-number="3" class=""><span class="tooltip-container"></span>val phase2 = timed.child("phase-2")
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>phase1(Seq.fill(100)(()), _ =&gt; doWork1())
</span><span line-number="6" class=""><span class="tooltip-container"></span>phase2.run(doWork2())
</span><span line-number="7" class=""><span class="tooltip-container"></span>
</span><span line-number="8" class=""><span class="tooltip-container"></span>println(timed.report)                                   // hierarchical durations with percentages
</span></code></pre>
              <div class="buttons"></div>
             </div>
            </div>
            <h2 class="h200">Attributes</h2>
            <dl class="attributes attributes-small"></dl>
           </div>
          </div>
         </div>
        </div>
       </div>
       <div class="documentableElement">
        <div class="documentableElement-expander">
         <button class="icon-button ar show-content"></button>
         <div class="header monospace mono-medium">
          <div class="signature">
           <span class="modifiers"></span><span class="kind"><span t="k">package </span></span><a href="eqsat/rewriting.html" t="n" class="documentableName ">foresight.eqsat.rewriting</a>
          </div>
         </div>
        </div>
        <div class="docs">
         <span class="modifiers"></span>
         <div>
          <div class="originInfo"></div>
          <div class="memberDocumentation">
           <div class="documentableBrief doc">
            <p>Provides the core building blocks for rewrite-driven equality saturation over immutable e-graphs. Defines the search/apply pipeline, mechanisms for delayed command execution, parallel search, reversible rules, and match portability for caching across e-graph snapshots.</p>
           </div>
           <div class="cover">
            <div class="doc">
             <p>Provides the core building blocks for rewrite-driven equality saturation over immutable e-graphs. Defines the search/apply pipeline, mechanisms for delayed command execution, parallel search, reversible rules, and match portability for caching across e-graph snapshots.</p>
             <h2><a href="#core-ideas" id="core-ideas">Core ideas</a></h2>
             <p>The system is built on <strong>immutable e-graphs</strong>, where every change is represented as a <a href="eqsat/commands/Command.html">foresight.eqsat.commands.Command</a> value. Instead of mutating the e-graph in place, commands are executed later to produce a new snapshot.</p>
             <p>Rules follow a <strong>search → apply → compose</strong> flow. A <a href="eqsat/rewriting/Searcher.html">Searcher</a> is responsible for finding matches; an <span data-unresolved-link="">Applier</span> transforms each match into a command; and a <span data-unresolved-link="">Rule</span> combines these per-match commands into a single optimized operation.</p>
             <p>Many methods in this package support <strong>parallelism</strong> through <a href="eqsat/parallel/ParallelMap.html">foresight.eqsat.parallel.ParallelMap</a>, allowing work to be labeled and distributed efficiently.</p>
             <p>Components are often <strong>reversible</strong>. A <a href="eqsat/rewriting/ReversibleSearcher.html">ReversibleSearcher</a>, for example, can be inverted into an applier, while a <a href="eqsat/rewriting/ReversibleApplier.html">ReversibleApplier</a> can become a searcher. Pipelines composed of reversible phases—via <a href="eqsat/rewriting/ReversibleSearcherPhase.html">ReversibleSearcherPhase</a>—can be reversed step-by-step, and a <span data-unresolved-link="">Rule</span> built entirely from reversible parts can be flipped in its entirety using <span data-unresolved-link="">Rule.tryReverse</span>.</p>
             <p>Matches are also <strong>portable</strong>. By implementing <a href="eqsat/rewriting/PortableMatch.html">PortableMatch</a>, a match can remain meaningful across multiple e-graph snapshots, enabling caching and reapplication through <a href="eqsat/saturation/EGraphWithRecordedApplications.html">foresight.eqsat.saturation.EGraphWithRecordedApplications</a> and <a href="eqsat/saturation/SearchAndApply$.html#withCaching-bc7">foresight.eqsat.saturation.SearchAndApply$.withCaching</a>.</p>
             <h2><a href="#typical-workflow" id="typical-workflow">Typical workflow</a></h2>
             <p>A typical use of this package begins by defining a searcher. This is often constructed from one or more phases implementing <a href="eqsat/rewriting/SearcherPhase.html">SearcherPhase</a>, which perform per-class work through <code>search(call, egraph, input)</code> and aggregate results across the whole graph using <code>aggregate(map)</code>. Phases can be composed sequentially with <a href="eqsat/rewriting/Searcher.html#chain-249">Searcher.chain</a> or run in parallel with <a href="eqsat/rewriting/Searcher.html#product-727">Searcher.product</a>.</p>
             <p>Next, an applier is defined to convert each match into a <a href="eqsat/commands/Command.html">foresight.eqsat.commands.Command</a>. The searcher and applier are then paired to form a <span data-unresolved-link="">Rule</span>. Rules can be executed immediately using <span data-unresolved-link="">Rule.apply</span>, or staged for later execution with <span data-unresolved-link="">Rule.delayed</span>—either individually or batched with others.</p>
             <p>When portability is required, caching can be introduced via <a href="eqsat/saturation/SearchAndApply$.html#withCaching-bc7">foresight.eqsat.saturation.SearchAndApply$.withCaching</a>, which ensures that matches are recognized and skipped if they have already been applied to the current e-graph state.</p>
             <h2><a href="#from-low-level-rules-to-high-level-saturation" id="from-low-level-rules-to-high-level-saturation">From low-level rules to high-level saturation</a></h2>
             <p>While individual rules and matchers form the foundation, higher-level orchestration is handled by the saturation framework in <a href="eqsat/saturation.html">foresight.eqsat.saturation</a>. A <a href="eqsat/saturation/Strategy.html">foresight.eqsat.saturation.Strategy</a> composes these rules into a sequence of saturation steps, controlling iteration order, stopping conditions, caching behavior, and e-graph rebasing. Predefined strategies include <a href="eqsat/saturation/MaximalRuleApplication.html">foresight.eqsat.saturation.MaximalRuleApplication</a> (and its caching variant), <a href="eqsat/saturation/BackoffRuleApplication.html">foresight.eqsat.saturation.BackoffRuleApplication</a> for quota and cooldown control, and <a href="eqsat/saturation/StochasticRuleApplication.html">foresight.eqsat.saturation.StochasticRuleApplication</a> for randomized application order.</p>
             <h2><a href="#reversal" id="reversal">Reversal</a></h2>
             <p>Reversal is a key capability for bidirectional reasoning. A <a href="eqsat/rewriting/ReversibleSearcher.html">ReversibleSearcher</a> can produce an applier that undoes its transformation, and a <a href="eqsat/rewriting/ReversibleApplier.html">ReversibleApplier</a> can do the opposite. Pipelines can be reversed phase by phase via <a href="eqsat/rewriting/ReversibleSearcherPhase.html#tryReverse-3c2">ReversibleSearcherPhase.tryReverse</a>, and if both the searcher and applier in a <span data-unresolved-link="">Rule</span> are reversible, the entire rule can be inverted with <span data-unresolved-link="">Rule.tryReverse</span>.</p>
             <h2><a href="#portability-and-caching" id="portability-and-caching">Portability and caching</a></h2>
             <p>Portability ensures that matches survive e-graph changes. A type implementing <a href="eqsat/rewriting/PortableMatch.html">PortableMatch</a> can map its internal identifiers to the corresponding ones in a new snapshot, preserving structural meaning. Purely structural matches can treat <code>port</code> as a no-op, while ID-bearing matches perform translations such as canonicalization. Recording and replaying matches is supported by <a href="eqsat/saturation/EGraphWithRecordedApplications.html">foresight.eqsat.saturation.EGraphWithRecordedApplications</a>, and caching is provided by <a href="eqsat/saturation/SearchAndApply$.html#withCaching-bc7">foresight.eqsat.saturation.SearchAndApply$.withCaching</a>.</p>
             <h2><a href="#design-contracts" id="design-contracts">Design contracts</a></h2>
             <p>The package assumes that searchers and phases are pure, meaning they never mutate the e-graph directly. Appliers produce commands rather than making in-place changes. Search and application are safe to run in parallel when operating on disjoint work units. Finally, commands generated by a rule are aggregated into an optimized batch and are intended to be idempotent.</p>
             <h2><a href="#quick-reference" id="quick-reference">Quick reference</a></h2>
             <p>Main entry points for search are <a href="eqsat/rewriting/Searcher.html">Searcher</a>, <a href="eqsat/rewriting/SearcherPhase.html">SearcherPhase</a>, <a href="eqsat/rewriting/ReversibleSearcher.html">ReversibleSearcher</a>, and <a href="eqsat/rewriting/ReversibleSearcherPhase.html">ReversibleSearcherPhase</a>; for application: <span data-unresolved-link="">Applier</span> and <a href="eqsat/rewriting/ReversibleApplier.html">ReversibleApplier</a>; for composition: <span data-unresolved-link="">Rule</span>; for matches across snapshots: <a href="eqsat/rewriting/PortableMatch.html">PortableMatch</a>; and for caching and recording: <a href="eqsat/saturation/EGraphWithRecordedApplications.html">foresight.eqsat.saturation.EGraphWithRecordedApplications</a> and <a href="eqsat/saturation/SearchAndApply$.html#withCaching-bc7">foresight.eqsat.saturation.SearchAndApply$.withCaching</a>. Strategies for high-level orchestration include <a href="eqsat/saturation/Strategy.html">foresight.eqsat.saturation.Strategy</a>, <a href="eqsat/saturation/MaximalRuleApplication.html">foresight.eqsat.saturation.MaximalRuleApplication</a>, <a href="eqsat/saturation/BackoffRuleApplication.html">foresight.eqsat.saturation.BackoffRuleApplication</a>, and <a href="eqsat/saturation/StochasticRuleApplication.html">foresight.eqsat.saturation.StochasticRuleApplication</a>.</p>
            </div>
            <h2 class="h200">Attributes</h2>
            <dl class="attributes attributes-small">
             <dt class="body-small">
              Example
             </dt>
             <dd class="body-medium">
              <div>
               <div>
                <p>Typical workflow</p>
                <div class="snippet mono-small-block">
                 <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>import foresight.eqsat.rewriting._
</span><span line-number="2" class=""><span class="tooltip-container"></span>import foresight.eqsat.parallel.ParallelMap
</span><span line-number="3" class=""><span class="tooltip-container"></span>import foresight.eqsat.commands.CommandQueue
</span><span line-number="4" class=""><span class="tooltip-container"></span>// 1) Search: single-phase searcher (returns Seq[MyMatch])
</span><span line-number="5" class=""><span class="tooltip-container"></span>val s: Searcher[MyNode, Seq[MyMatch], MyEGraph] = Searcher(myPhase)
</span><span line-number="6" class=""><span class="tooltip-container"></span>// 2) Apply: turn a match into a Command program
</span><span line-number="7" class=""><span class="tooltip-container"></span>val a: Applier[MyNode, MyMatch, MyEGraph] = (m, g) =&gt; buildCommand(m, g) // user-defined
</span><span line-number="8" class=""><span class="tooltip-container"></span>// 3) Rule: run now or stage/batch
</span><span line-number="9" class=""><span class="tooltip-container"></span>val r = Rule("my-rule", s, a)
</span><span line-number="10" class=""><span class="tooltip-container"></span>val updated = r(egraph, ParallelMap.default)                     // immediate
</span><span line-number="11" class=""><span class="tooltip-container"></span>val staged  = r.delayed(egraph)                                  // staged
</span><span line-number="12" class=""><span class="tooltip-container"></span>val batched = CommandQueue(Seq(staged, r2.delayed(egraph))).optimized
</span><span line-number="13" class=""><span class="tooltip-container"></span>val (next, _) = batched(egraph, Map.empty, ParallelMap.default)  // execute batch
</span></code></pre>
                 <div class="buttons"></div>
                </div>
               </div>
               <div>
                <p>Run with a saturation strategy</p>
                <div class="snippet mono-small-block">
                 <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>import foresight.eqsat.saturation._
</span><span line-number="2" class=""><span class="tooltip-container"></span>import scala.concurrent.duration._
</span><span line-number="3" class=""><span class="tooltip-container"></span>val rules: Seq[Rule[MyNode, MyMatch, MyEGraph]] = Seq(r1, r2, r3)
</span><span line-number="4" class=""><span class="tooltip-container"></span>val strategy =
</span><span line-number="5" class=""><span class="tooltip-container"></span> MaximalRuleApplicationWithCaching(rules)
</span><span line-number="6" class=""><span class="tooltip-container"></span>   .withTimeout(30.seconds)
</span><span line-number="7" class=""><span class="tooltip-container"></span>   .repeatUntilStable
</span><span line-number="8" class=""><span class="tooltip-container"></span>val result = strategy.run(myEGraph)
</span></code></pre>
                 <div class="buttons"></div>
                </div>
               </div>
               <div>
                <p>Reversal (bidirectional rules)</p>
                <div class="snippet mono-small-block">
                 <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>val forward: Rule[MyNode, MyMatch, MyEGraph] = ...
</span><span line-number="2" class=""><span class="tooltip-container"></span>val maybeBack = forward.tryReverse
</span><span line-number="3" class=""><span class="tooltip-container"></span>val back = maybeBack.get  // if defined, 'back' applies the inverse transformation
</span></code></pre>
                 <div class="buttons"></div>
                </div>
               </div>
               <div>
                <p>Portability and caching</p>
                <div class="snippet mono-small-block">
                 <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>import foresight.eqsat.saturation._
</span><span line-number="2" class=""><span class="tooltip-container"></span>type M = MyMatch with PortableMatch[MyNode, M]
</span><span line-number="3" class=""><span class="tooltip-container"></span>val sa = SearchAndApply.withCaching[MyNode, MyEGraph, M]
</span><span line-number="4" class=""><span class="tooltip-container"></span>val found: Map[String, Seq[M]] =
</span><span line-number="5" class=""><span class="tooltip-container"></span> sa.search(Seq(r1, r2), EGraphWithRecordedApplications(egraph), ParallelMap.default)
</span><span line-number="6" class=""><span class="tooltip-container"></span>val after = sa.apply(Seq(r1, r2), found, EGraphWithRecordedApplications(egraph), ParallelMap.default)
</span></code></pre>
                 <div class="buttons"></div>
                </div>
               </div>
              </div>
             </dd>
            </dl>
           </div>
          </div>
         </div>
        </div>
       </div>
       <div class="documentableElement">
        <div class="documentableElement-expander">
         <button class="icon-button ar show-content"></button>
         <div class="header monospace mono-medium">
          <div class="signature">
           <span class="modifiers"></span><span class="kind"><span t="k">package </span></span><a href="eqsat/saturation.html" t="n" class="documentableName ">foresight.eqsat.saturation</a>
          </div>
         </div>
        </div>
        <div class="docs">
         <span class="modifiers"></span>
         <div>
          <div class="originInfo"></div>
          <div class="memberDocumentation">
           <div class="documentableBrief doc">
            <p>Defines core abstractions and concrete strategies for saturation-based rewriting over e-graphs. Saturation refers to the process of repeatedly applying rewrite rules until no new terms can be discovered or until a budget is exhausted.</p>
           </div>
           <div class="cover">
            <div class="doc">
             <p>Defines core abstractions and concrete strategies for saturation-based rewriting over e-graphs. Saturation refers to the process of repeatedly applying rewrite rules until no new terms can be discovered or until a budget is exhausted.</p>
             <p>The key component is the <a href="eqsat/saturation/Strategy.html">Strategy</a> trait, which encapsulates a step-by-step transformation over an e-graph with user-defined data and iteration control. Strategies can be composed, repeated, rebased, and extended with metadata.</p>
             <h2><a href="#key-concepts" id="key-concepts">Key Concepts</a></h2>
             <ul>
              <li><a href="eqsat/saturation/Strategy.html">Strategy</a>: Core trait representing a saturation step that transforms an e-graph.</li>
              <li><a href="eqsat/saturation/SearchAndApply.html">SearchAndApply</a>: Separates search from application logic for fine-grained control.</li>
              <li><a href="eqsat/saturation/MaximalRuleApplication.html">MaximalRuleApplication</a>: Applies every match for each rule once per iteration (no fixpoint).</li>
              <li><a href="eqsat/saturation/MaximalRuleApplicationWithCaching$.html">MaximalRuleApplicationWithCaching</a>: Same as above, but avoids reapplying matches across iterations.</li>
              <li><a href="eqsat/saturation/BackoffRuleApplication.html">BackoffRuleApplication</a>: Applies rules with dynamic quotas and cooldown periods to balance rule usage.</li>
              <li><a href="eqsat/saturation/StochasticRuleApplication.html">StochasticRuleApplication</a>: Applies a batch of matches selected probabilistically based on priorities.</li>
              <li><a href="eqsat/saturation/StochasticRuleApplicationWithCaching$.html">StochasticRuleApplicationWithCaching</a>: Same as above, but avoids reapplying matches across iterations.</li>
             </ul>
             <h2><a href="#typical-usage" id="typical-usage">Typical Usage</a></h2>
             <p>More sophisticated strategies are constructed using built-in or user-defined combinators. For example, to run a maximal application strategy to convergence with a timeout and periodic rebasing:</p>
             <div class="snippet mono-small-block">
              <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span> val strategy = MaximalRuleApplication(myRules)
</span><span line-number="2" class=""><span class="tooltip-container"></span>   .withTimeout(30.seconds)
</span><span line-number="3" class=""><span class="tooltip-container"></span>   .repeatUntilStable
</span><span line-number="4" class=""><span class="tooltip-container"></span>   .thenRebase(extractor)
</span><span line-number="5" class=""><span class="tooltip-container"></span>   .withIterationLimit(5)
</span><span line-number="6" class=""><span class="tooltip-container"></span>   .repeatUntilStable
</span><span line-number="7" class=""><span class="tooltip-container"></span>
</span><span line-number="8" class=""><span class="tooltip-container"></span> val result = strategy.run(myEGraph)
</span></code></pre>
              <div class="buttons"></div>
             </div>
            </div>
            <h2 class="h200">Attributes</h2>
            <dl class="attributes attributes-small"></dl>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
    </section>
    <section id="Type-members">
     <div data-togglable="Type members" class="tab expand">
      <div class="member-group-header">
       <h3 data-togglable="Type members" class="h400">Type members</h3>
      </div>
      <section id="Classlikes">
       <div class="documentableList expand">
        <div class="documentableList-expander">
         <button class="icon-button show-content expand"></button>
         <h4 class="groupHeader h200">Classlikes</h4>
        </div>
        <div class="documentableElement" data-f-keywords="sealed">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="modifiers"><span t="k">sealed </span></span><span class="kind"><span t="k">trait </span></span><a href="eqsat/AddNodeResult.html" t="n" class="documentableName ">AddNodeResult</a>
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>Represents the outcome of attempting to add an e-node to an e-graph.</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>Represents the outcome of attempting to add an e-node to an e-graph.</p>
              <p>There are two possible results:</p>
              <ul>
               <li><a href="eqsat/AddNodeResult$$AlreadyThere.html">AddNodeResult.AlreadyThere</a>: The e-node was already present in the e-graph.</li>
               <li><a href="eqsat/AddNodeResult$$Added.html">AddNodeResult.Added</a>: The e-node was successfully added to the e-graph.</li>
              </ul>
              <p>Both cases provide the corresponding <a href="eqsat/EClassCall.html">EClassCall</a> for the e-node.</p>
             </div>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Companion
              </dt>
              <dd class="body-medium">
               <a href="eqsat/AddNodeResult$.html">object</a>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span></span>
               </div>
              </dd>
              <dt class="body-small">
               Known subtypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block subtypes">
                <div>
                 class <a href="eqsat/AddNodeResult$$Added.html" t="n">Added</a>
                </div>
                <div>
                 class <a href="eqsat/AddNodeResult$$AlreadyThere.html" t="n">AlreadyThere</a>
                </div><span></span>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="modifiers"></span><span class="kind"><span t="k">object </span></span><a href="eqsat/AddNodeResult$.html" t="n" class="documentableName ">AddNodeResult</a>
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>The companion object for <a href="eqsat/AddNodeResult.html">AddNodeResult</a>.</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>The companion object for <a href="eqsat/AddNodeResult.html">AddNodeResult</a>.</p>
             </div>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Companion
              </dt>
              <dd class="body-medium">
               <a href="eqsat/AddNodeResult.html">trait</a>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 trait <span data-unresolved-link="" t="n">Sum</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Mirror</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span></span>
               </div>
              </dd>
              <dt class="body-small">
               Self type
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <span></span>
                <div>
                 <a href="eqsat/AddNodeResult$.html" t="n">AddNodeResult</a>.<span t="k">type</span>
                </div>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement" data-f-keywords="final,case">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="modifiers"><span t="k">final case </span></span><span class="kind"><span t="k">class </span></span><a href="eqsat/EClassCall.html" t="n" class="documentableName ">EClassCall</a>(<span t="k"></span><span t="k"></span><span data-unresolved-link="" t="n">ref</span>: <a href="eqsat/EClassRef.html" t="t">EClassRef</a>, <span t="k"></span><span data-unresolved-link="" t="n">args</span>: <a href="eqsat/SlotMap.html" t="t">SlotMap</a>)
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>Represents the application of an <a href="eqsat/EClassRef.html">EClassRef</a> to a set of argument slots.</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>Represents the application of an <a href="eqsat/EClassRef.html">EClassRef</a> to a set of argument slots.</p>
              <p>An e-class application combines:</p>
              <ul>
               <li>A reference to an e-class (<code>ref</code>), which may have parameter slots.</li>
               <li>A <a href="eqsat/SlotMap.html">SlotMap</a> mapping each parameter slot to a corresponding argument slot.</li>
              </ul>
              <p>Slots are a generalization of term variables that allow the e-graph to represent parameterized e-classes and maintain consistent argument binding across multiple occurrences. This enables advanced rewriting techniques such as those described in Schneider et al., "E-Graphs with Classes and Slots: Reasoning with Parameterized Equivalence Classes" (Proc. ACM Program. Lang., OOPSLA 2024).</p>
              <p>The argument slot map (<code>args</code>) specifies, for each parameter slot in the e-class, which argument slot should be used when this e-class is applied. This supports sharing, renaming, and partial instantiation of e-classes within larger expressions.</p>
             </div>
             <h2 class="h200">Value parameters</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               args
              </dt>
              <dd class="body-medium">
               <p>The mapping from the e-class's parameter slots to argument slots.</p>
              </dd>
              <dt class="body-small">
               ref
              </dt>
              <dd class="body-medium">
               <p>The reference to the e-class being applied.</p>
              </dd>
             </dl>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Example
              </dt>
              <dd class="body-medium">
               <div>
                <div>
                 <div class="snippet mono-small-block">
                  <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>// EClassRef `subXY` has parameter slots (x, y) representing "x - y"
</span><span line-number="2" class=""><span class="tooltip-container"></span>val call1 = EClassCall(subXY, SlotMap(x -&gt; a, y -&gt; b)) // represents "a - b"
</span><span line-number="3" class=""><span class="tooltip-container"></span>val call2 = EClassCall(subXY, SlotMap(x -&gt; b, y -&gt; a)) // represents "b - a"
</span></code></pre>
                  <div class="buttons"></div>
                 </div>
                </div>
               </div>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 trait <span data-unresolved-link="" t="n">Serializable</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Product</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Equals</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span class="show-all-code show-content text-button h100">Show all</span>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement" data-f-keywords="final">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="modifiers"><span t="k">final </span></span><span class="kind"><span t="k">class </span></span><a href="eqsat/EClassRef.html" t="n" class="documentableName ">EClassRef</a>
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>A stable handle identifying an e-class in an e-graph.</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>A stable handle identifying an e-class in an e-graph.</p>
              <p>An e-class is a set of equivalent expressions (e-nodes) maintained by the e-graph as part of its congruence-closure structure. Each e-class may be parameterized by slots (see Schneider et al., "E-Graphs with Classes and Slots: Reasoning with Parameterized Equivalence Classes", Proc. ACM Program. Lang., OOPSLA 2024, extended version).</p>
              <p>When a new e-class is created, the e-graph generates a fresh <code>EClassRef</code> as its identity. This reference is stable across transformations, but the equivalence relation maintained by the e-graph may cause multiple <code>EClassRef</code> instances to represent the same underlying e-class if merges occur.</p>
              <p>Because merges are common in equality saturation, <code>EClassRef</code> values are not guaranteed to be canonical. To obtain a canonical representative of the current equivalence class, use:</p>
              <div class="snippet mono-small-block">
               <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>egraph.canonicalize(ref)
</span></code></pre>
               <div class="buttons"></div>
              </div>
              <p>This returns an <code>EClassRef</code> that is the unique canonical handle for the merged class in the given e-graph state.</p>
              <p><code>EClassRef</code> is used both directly for identifying classes and indirectly in parameterized applications via <a href="eqsat/EClassCall.html">EClassCall</a>, where it is paired with a mapping from the class's parameter slots to argument slots in the caller's context.</p>
              <p>Equality and hashing of <code>EClassRef</code> instances are based solely on their internal identity, not on the current structure of the e-graph. This allows them to be used as keys in maps or sets, but note that their equivalence meaning may change as the e-graph evolves.</p>
             </div>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span></span>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="signature-short"><span class="modifiers"></span><span class="kind"><span t="k">trait </span></span><a href="eqsat/EGraph.html" t="n" class="documentableName ">EGraph</a>[<span t="k"></span><span data-unresolved-link="" t="t">NodeT</span>]<span t="k"> extends </span><a href="eqsat/EGraphLike.html" t="t">EGraphLike</a>[<span t="t">NodeT</span>, <a href="eqsat/EGraph.html" t="t">EGraph</a>[<span t="t">NodeT</span>]]</span><span class="signature-long"></span>
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>An e-graph compactly represents many equivalent expressions at once by grouping structurally</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>An e-graph compactly represents many equivalent expressions at once by grouping structurally</p>
              <ul>
               <li>compatible nodes into e-classes. This enables fast equality saturation and rewrite exploration</li>
               <li>without duplicating common substructure.</li>
              </ul>
              <p><code>EGraph</code> is a convenience alias of <a href="eqsat/EGraphLike.html">EGraphLike</a> where the self type equals the trait itself: <code>EGraph[NodeT]</code> extends <code>EGraphLike[NodeT, EGraph[NodeT]]</code>. Use this when you don’t need a custom concrete e-graph subtype in your method signatures.</p>
              <p>Semantics:</p>
              <ul>
               <li><strong>Immutable:</strong> All mutating operations (add/union/etc.) return a new <code>EGraph[NodeT]</code>.</li>
               <li><strong>Canonicalization:</strong> Queries and updates are expressed in terms of canonical e-classes.</li>
               <li><strong>Total API:</strong> All core operations (query, add, union, find) are inherited from <a href="eqsat/EGraphLike.html">EGraphLike</a>.</li>
              </ul>
             </div>
             <h2 class="h200">Type parameters</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               NodeT
              </dt>
              <dd class="body-medium">
               <p>The domain-specific node type stored in e-nodes.</p>
              </dd>
             </dl>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Example
              </dt>
              <dd class="body-medium">
               <div>
                <div>
                 <p>Typical usage</p>
                 <div class="snippet mono-small-block">
                  <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>val g0: EGraph[MyNode] = EGraph.empty
</span><span line-number="2" class=""><span class="tooltip-container"></span>val (c1, g1) = g0.add(ENode(Add, defs = SlotSet.empty, uses = SlotSet.empty, args = Seq(...)))
</span><span line-number="3" class=""><span class="tooltip-container"></span>val (c2, g2) = g1.add(ENode(Mul, defs = ..., uses = ..., args = Seq(...)))
</span><span line-number="4" class=""><span class="tooltip-container"></span>val g3 = g2.union(c1, c2).rebuilt
</span></code></pre>
                  <div class="buttons"></div>
                 </div>
                </div>
               </div>
              </dd>
              <dt class="body-small">
               Companion
              </dt>
              <dd class="body-medium">
               <a href="eqsat/EGraph$.html">object</a>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 trait <a href="eqsat/EGraphLike.html" t="n">EGraphLike</a>[<span t="t">NodeT</span>, <a href="eqsat/EGraph.html" t="t">EGraph</a>[<span t="t">NodeT</span>]]
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span></span>
               </div>
              </dd>
              <dt class="body-small">
               Known subtypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block subtypes">
                <div>
                 class <a href="eqsat/saturation/EGraphWithRecordedApplications.html" t="n">EGraphWithRecordedApplications</a>[<span t="t">Node</span>, <span t="t">Repr</span>, <span t="t">Match</span>]
                </div>
                <div>
                 class <a href="eqsat/saturation/EGraphWithRoot.html" t="n">EGraphWithRoot</a>[<span t="t">Node</span>, <span t="t">Repr</span>]
                </div><span></span>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="modifiers"></span><span class="kind"><span t="k">object </span></span><a href="eqsat/EGraph$.html" t="n" class="documentableName ">EGraph</a>
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>Constructors and helpers for <a href="eqsat/EGraph.html">EGraph</a>.</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>Constructors and helpers for <a href="eqsat/EGraph.html">EGraph</a>.</p>
              <p>Functions here return a plain <code>EGraph[NodeT]</code> backed by a hash-consing implementation.</p>
             </div>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Companion
              </dt>
              <dd class="body-medium">
               <a href="eqsat/EGraph.html">trait</a>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span></span>
               </div>
              </dd>
              <dt class="body-small">
               Self type
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <span></span>
                <div>
                 <a href="eqsat/EGraph$.html" t="n">EGraph</a>.<span t="k">type</span>
                </div>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="modifiers"></span><span class="kind"><span t="k">trait </span></span><a href="eqsat/EGraphLike.html" t="n" class="documentableName ">EGraphLike</a>[<span t="k"></span><span data-unresolved-link="" t="t">NodeT</span>, <span t="k">+</span><span data-unresolved-link="" t="t">This</span><span t="k"> &lt;: </span><a href="eqsat/EGraphLike.html" t="t">EGraphLike</a>[<span t="t">NodeT</span>, <span t="t">This</span>]<span t="k"> &amp; </span><a href="eqsat/EGraph.html" t="t">EGraph</a>[<span t="t">NodeT</span>]]
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>An e-graph*is a data structure for representing and maintaining equivalence classes of expressions. E-graphs support equality saturation, a powerful technique for exploring all equivalent forms of a term by exhaustively applying rewrite rules while avoiding redundant work by compacting equivalent subterms into shared e-classes.</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>An e-graph*is a data structure for representing and maintaining equivalence classes of expressions. E-graphs support equality saturation, a powerful technique for exploring all equivalent forms of a term by exhaustively applying rewrite rules while avoiding redundant work by compacting equivalent subterms into shared e-classes.</p>
              <p>In Foresight, an e-graph contains:</p>
              <ul>
               <li><strong>E-classes</strong> (<a href="eqsat/EClassRef.html">EClassRef</a>/<a href="eqsat/EClassCall.html">EClassCall</a>): partitions of semantically equivalent expressions.</li>
               <li><strong>E-nodes</strong> (<a href="eqsat/ENode.html">ENode</a>): operator/operand tuples representing a single application of a function or constructor.</li>
               <li>A <strong>canonicalization invariant</strong>: every e-class has a unique, canonical representative, and all queries and updates are expressed in terms of these canonical forms.</li>
              </ul>
              <h2><a href="#purpose-of-this-trait" id="purpose-of-this-trait">Purpose of this trait</a></h2>
              <p><a href="eqsat/EGraphLike.html">EGraphLike</a> defines the core API contract for e-graph implementations, parameterized by:</p>
              <ul>
               <li>The node payload type <code>NodeT</code> (the domain-specific symbol type your e-nodes use).</li>
               <li>The self-type <code>This</code>, so all operations that conceptually return "the same kind of e-graph" return your most-derived type, preserving fluent, type-safe chaining.</li>
              </ul>
              <p>This trait is deliberately minimal but powerful:</p>
              <ul>
               <li><strong>Query methods</strong>: enumerate classes, retrieve nodes, check membership, canonicalize, resolve usage.</li>
               <li><strong>Construction methods</strong>: add nodes and trees, bulk-add, merge e-classes (union), or create an empty graph.</li>
               <li><strong>Traversal methods</strong>: find the e-class containing a given node or tree.</li>
              </ul>
              <p>Concrete e-graph variants (e.g., with metadata, recorded rule applications, or deferred unions) are built by wrapping or extending a base <a href="eqsat/EGraphLike.html">EGraphLike</a> implementation.</p>
              <h2><a href="#immutability-and-functional-style" id="immutability-and-functional-style">Immutability and functional style</a></h2>
              <p>All e-graph operations return a <strong>new</strong> e-graph instance rather than mutating the receiver. This makes e-graphs:</p>
              <ul>
               <li><strong>Thread-safe by default</strong> for read operations</li>
               <li>Naturally suited to speculative or branch-and-bound rewriting, where multiple alternate states can be explored in parallel without interfering with each other</li>
              </ul>
              <p>As a consequence:</p>
              <ul>
               <li>Adding nodes or merging classes returns a <em>new</em> <code>This</code> instance with the updated structure.</li>
               <li>Query methods never modify the e-graph.</li>
              </ul>
              <h2><a href="#canonicalization" id="canonicalization">Canonicalization</a></h2>
              <p>Canonicalization is central to e-graph correctness and performance:</p>
              <ul>
               <li>Every e-class is identified by a canonical <a href="eqsat/EClassRef.html">EClassRef</a> (chosen representative).</li>
               <li>When adding or merging, all inputs are canonicalized so that the same equivalence is not represented twice.</li>
               <li>Queries that take non-canonical inputs will internally canonicalize them.</li>
              </ul>
              <h2><a href="#related-types" id="related-types">Related types</a></h2>
              <ul>
               <li><a href="eqsat/EGraph.html">EGraph</a> — a simpler, single-parameter variant of this trait.</li>
               <li><span data-unresolved-link="">foresight.eqsat.metadata.EGraphWithMetadata</span> — an <a href="eqsat/EGraphLike.html">EGraphLike</a> augmented with per-class metadata storage.</li>
               <li><a href="eqsat/EGraphWithPendingUnions.html">EGraphWithPendingUnions</a> — a deferred-union wrapper for batching merges before a rebuild.</li>
               <li><a href="eqsat/ENode.html">ENode</a>, <a href="eqsat/EClassRef.html">EClassRef</a>, <a href="eqsat/EClassCall.html">EClassCall</a>, <a href="eqsat/ShapeCall.html">ShapeCall</a> — fundamental building blocks.</li>
              </ul>
             </div>
             <h2 class="h200">Type parameters</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               NodeT
              </dt>
              <dd class="body-medium">
               <p>The type of the domain-specific symbol or operator stored in each e-node.</p>
              </dd>
              <dt class="body-small">
               This
              </dt>
              <dd class="body-medium">
               <p>The concrete e-graph type mixing in this trait, enabling precise return types for fluent APIs.</p>
              </dd>
             </dl>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Example
              </dt>
              <dd class="body-medium">
               <div>
                <div>
                 <p>Typical usage</p>
                 <div class="snippet mono-small-block">
                  <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>val (classA, g1) = egraph.add(nodeA)
</span><span line-number="2" class=""><span class="tooltip-container"></span>val (classB, g2) = g1.add(nodeB)
</span><span line-number="3" class=""><span class="tooltip-container"></span>val g3 = g2.union(classA, classB).rebuilt // merge equivalences
</span><span line-number="4" class=""><span class="tooltip-container"></span>val allClasses: Iterable[EClassRef] = g3.classes
</span></code></pre>
                  <div class="buttons"></div>
                 </div>
                </div>
               </div>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span></span>
               </div>
              </dd>
              <dt class="body-small">
               Known subtypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block subtypes">
                <div>
                 class <a href="eqsat/saturation/EGraphWithRecordedApplications.html" t="n">EGraphWithRecordedApplications</a>[<span t="t">Node</span>, <span t="t">Repr</span>, <span t="t">Match</span>]
                </div>
                <div>
                 class <a href="eqsat/saturation/EGraphWithRoot.html" t="n">EGraphWithRoot</a>[<span t="t">Node</span>, <span t="t">Repr</span>]
                </div>
                <div>
                 trait <a href="eqsat/EGraph.html" t="n">EGraph</a>[<span t="t">NodeT</span>]
                </div><span></span>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement" data-f-keywords="final,case">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="modifiers"><span t="k">final case </span></span><span class="kind"><span t="k">class </span></span><a href="eqsat/EGraphWithPendingUnions.html" t="n" class="documentableName ">EGraphWithPendingUnions</a>[<span t="k"></span><span data-unresolved-link="" t="t">NodeT</span>, <span t="k">+</span><span data-unresolved-link="" t="t">Repr</span><span t="k"> &lt;: </span><a href="eqsat/EGraphLike.html" t="t">EGraphLike</a>[<span t="t">NodeT</span>, <span t="t">Repr</span>]<span t="k"> &amp; </span><a href="eqsat/EGraph.html" t="t">EGraph</a>[<span t="t">NodeT</span>]](<span t="k"></span><span t="k"></span><span data-unresolved-link="" t="n">egraph</span>: <span data-unresolved-link="" t="t">Repr</span>, <span t="k"></span><span data-unresolved-link="" t="n">pending</span>: <span data-unresolved-link="" t="t">List</span>[(<a href="eqsat/EClassCall.html" t="t">EClassCall</a>, <a href="eqsat/EClassCall.html" t="t">EClassCall</a>)])
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>A lightweight wrapper around an e-graph that defers the application of union operations.</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>A lightweight wrapper around an e-graph that defers the application of union operations.</p>
              <p>Normally, applying a union in an e-graph requires invoking <a href="eqsat/EGraph.html#unionMany-fffff0dd">EClassCall)], ParallelMap)</a>, which merges the e-classes and triggers a rebuild. When many unions are expected—such as during a rewrite pass—it is more efficient to defer them and apply them all at once.</p>
              <p><code>EGraphWithPendingUnions</code> collects such deferred unions and lets you apply them in a batch by calling <a href="eqsat/EGraphWithPendingUnions.html#rebuilt-0">rebuilt</a> or <a href="eqsat/EGraphWithPendingUnions.html#rebuild-ffffff99">rebuild</a>. Internally, these methods delegate to <a href="eqsat/EGraph.html#unionMany-fffff0dd">EClassCall)], ParallelMap)</a>, ensuring that all unions are applied and the e-graph is fully rebuilt.</p>
              <p>You rarely need to construct this wrapper directly. Instead, you can call <a href="eqsat/EGraph.html#union-527">EGraph.union</a>, which returns an <code>EGraphWithPendingUnions</code>, allowing fluent chaining:</p>
              <div class="snippet mono-small-block">
               <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>val updated = egraph
</span><span line-number="2" class=""><span class="tooltip-container"></span> .union(a, b)    // returns EGraphWithPendingUnions
</span><span line-number="3" class=""><span class="tooltip-container"></span> .union(c, d)    // chains further unions
</span><span line-number="4" class=""><span class="tooltip-container"></span> .rebuilt        // applies all pending unions and returns a rebuilt EGraph
</span></code></pre>
               <div class="buttons"></div>
              </div>
              <p>This is particularly useful in rewrite systems and equality saturation loops, where batching union operations avoids excessive intermediate rebuilds and improves performance.</p>
             </div>
             <h2 class="h200">Type parameters</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               NodeT
              </dt>
              <dd class="body-medium">
               <p>The type of e-nodes stored in the e-graph.</p>
              </dd>
              <dt class="body-small">
               Repr
              </dt>
              <dd class="body-medium">
               <p>The concrete type of the underlying e-graph, which must support union and rebuild.</p>
              </dd>
             </dl>
             <h2 class="h200">Value parameters</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               egraph
              </dt>
              <dd class="body-medium">
               <p>The underlying e-graph.</p>
              </dd>
              <dt class="body-small">
               pending
              </dt>
              <dd class="body-medium">
               <p>A list of deferred unions (pairs of e-class references).</p>
              </dd>
             </dl>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Companion
              </dt>
              <dd class="body-medium">
               <a href="eqsat/EGraphWithPendingUnions$.html">object</a>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 trait <span data-unresolved-link="" t="n">Serializable</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Product</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Equals</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span class="show-all-code show-content text-button h100">Show all</span>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="modifiers"></span><span class="kind"><span t="k">object </span></span><a href="eqsat/EGraphWithPendingUnions$.html" t="n" class="documentableName ">EGraphWithPendingUnions</a>
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>A companion object for <a href="eqsat/EGraphWithPendingUnions.html">EGraphWithPendingUnions</a>.</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>A companion object for <a href="eqsat/EGraphWithPendingUnions.html">EGraphWithPendingUnions</a>.</p>
             </div>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Companion
              </dt>
              <dd class="body-medium">
               <a href="eqsat/EGraphWithPendingUnions.html">class</a>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 trait <span data-unresolved-link="" t="n">Product</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Mirror</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span></span>
               </div>
              </dd>
              <dt class="body-small">
               Self type
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <span></span>
                <div>
                 <a href="eqsat/EGraphWithPendingUnions$.html" t="n">EGraphWithPendingUnions</a>.<span t="k">type</span>
                </div>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement" data-f-keywords="final,case">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="modifiers"><span t="k">final case </span></span><span class="kind"><span t="k">class </span></span><a href="eqsat/ENode.html" t="n" class="documentableName ">ENode</a>[<span t="k">+</span><span data-unresolved-link="" t="t">NodeT</span>](<span t="k"></span><span t="k"></span><span data-unresolved-link="" t="n">nodeType</span>: <span data-unresolved-link="" t="t">NodeT</span>, <span t="k"></span><span data-unresolved-link="" t="n">definitions</span>: <span data-unresolved-link="" t="t">Seq</span>[<a href="eqsat/Slot.html" t="t">Slot</a>], <span t="k"></span><span data-unresolved-link="" t="n">uses</span>: <span data-unresolved-link="" t="t">Seq</span>[<a href="eqsat/Slot.html" t="t">Slot</a>], <span t="k"></span><span data-unresolved-link="" t="n">args</span>: <span data-unresolved-link="" t="t">Seq</span>[<a href="eqsat/EClassCall.html" t="t">EClassCall</a>])
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>A node in a slotted e-graph.</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>A node in a slotted e-graph.</p>
              <p>An e-node represents one operator application together with its slot usage and child e-class applications. Slots are partitioned into:</p>
              <ul>
               <li><code>definitions</code>: slots introduced locally by this node (binder-internal slots that are not visible outside)</li>
               <li><code>uses</code>: slots referenced by this node that come from its surrounding context (free with respect to this node) Child expressions are referenced via <code>args</code> as <a href="eqsat/EClassCall.html">EClassCall</a>s, which carry their own parameter-to-argument slot maps.</li>
              </ul>
              <p>Node types (<code>NodeT</code>) supply the operator and any non-structural payload. Slots and arguments are provided here.</p>
             </div>
             <h2 class="h200">Type parameters</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               NodeT
              </dt>
              <dd class="body-medium">
               <p>The domain-specific node type. It defines operator identity and payload but not slots/children.</p>
              </dd>
             </dl>
             <h2 class="h200">Value parameters</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               args
              </dt>
              <dd class="body-medium">
               <p>Child e-class applications, each with its own parameter-to-argument <a href="eqsat/SlotMap.html">SlotMap</a>.</p>
              </dd>
              <dt class="body-small">
               definitions
              </dt>
              <dd class="body-medium">
               <p>Slots introduced by this node that are scoped locally and invisible to parents. These are redundant by construction at the boundary of this node and exist to model binders such as lambda-abstraction or let.</p>
              </dd>
              <dt class="body-small">
               nodeType
              </dt>
              <dd class="body-medium">
               <p>Operator or symbol for this node.</p>
              </dd>
              <dt class="body-small">
               uses
              </dt>
              <dd class="body-medium">
               <p>Slots referenced by this node that are visible to its parent and must be satisfied by the surrounding e-class application.</p>
              </dd>
             </dl>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Companion
              </dt>
              <dd class="body-medium">
               <a href="eqsat/ENode$.html">object</a>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 trait <span data-unresolved-link="" t="n">Serializable</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Product</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Equals</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span class="show-all-code show-content text-button h100">Show all</span>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="modifiers"></span><span class="kind"><span t="k">object </span></span><a href="eqsat/ENode$.html" t="n" class="documentableName ">ENode</a>
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>Constructors and helpers for <a href="eqsat/ENode.html">ENode</a>.</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>Constructors and helpers for <a href="eqsat/ENode.html">ENode</a>.</p>
             </div>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Companion
              </dt>
              <dd class="body-medium">
               <a href="eqsat/ENode.html">class</a>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 trait <span data-unresolved-link="" t="n">Product</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Mirror</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span></span>
               </div>
              </dd>
              <dt class="body-small">
               Self type
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <span></span>
                <div>
                 <a href="eqsat/ENode$.html" t="n">ENode</a>.<span t="k">type</span>
                </div>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="modifiers"></span><span class="kind"><span t="k">trait </span></span><a href="eqsat/MixedTree.html" t="n" class="documentableName ">MixedTree</a>[<span t="k">+</span><span data-unresolved-link="" t="t">NodeT</span>, <span t="k">+</span><span data-unresolved-link="" t="t">CallT</span>]
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>A heterogeneous term tree that interleaves node-typed interiors with leaf "calls".</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>A heterogeneous term tree that interleaves node-typed interiors with leaf "calls".</p>
              <p><code>MixedTree[NodeT, CallT]</code> represents a recursive structure where each branch is either a <a href="eqsat/MixedTree$$Node.html">MixedTree.Node</a> containing a <code>nodeType</code>, slot information, and child subtrees, or a <a href="eqsat/MixedTree$$Call.html">MixedTree.Call</a> containing a single leaf payload of type <code>CallT</code>. While every <a href="eqsat/MixedTree$$Call.html">MixedTree.Call</a> is necessarily a leaf, a <a href="eqsat/MixedTree$$Node.html">MixedTree.Node</a> can also be a leaf if it has no children. In such cases, the <a href="eqsat/MixedTree$$Node.html">MixedTree.Node</a> still participates in slot definitions and uses, but terminates the recursion.</p>
              <p>The type parameter <code>CallT</code> abstracts over the kind of leaf the tree carries. When <code>CallT</code> is <a href="eqsat/EClassCall.html">EClassCall</a>, leaves reference e-classes already present in an e-graph. When <code>CallT</code> is <a href="eqsat/rewriting/patterns/Pattern.html">foresight.eqsat.rewriting.patterns.Pattern</a>, the structure represents a rewrite pattern where leaves can be pattern variables or other atomic constructs. This design allows the same tree shape to serve multiple purposes: representing extracted terms from an e-graph, rewrite patterns for e-matching, or other specialized term-like structures.</p>
              <p>Slot semantics match those in <a href="eqsat/Tree.html">Tree</a> and <a href="eqsat/ENode.html">ENode</a>. The <code>definitions</code> sequence lists slots introduced by a <a href="eqsat/MixedTree$$Node.html">MixedTree.Node</a> that are not visible to its parents, while the <code>uses</code> sequence lists slots referenced by the <a href="eqsat/MixedTree$$Node.html">MixedTree.Node</a> that are defined elsewhere in the tree.</p>
              <p>This abstraction is useful when some subtrees must be treated as opaque handles rather than fully expanded node structures, allowing mixed granularity in the same representation.</p>
             </div>
             <h2 class="h200">Type parameters</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               CallT
              </dt>
              <dd class="body-medium">
               <p>The type used to represent leaf payloads.</p>
              </dd>
              <dt class="body-small">
               NodeT
              </dt>
              <dd class="body-medium">
               <p>The type used to represent interior nodes.</p>
              </dd>
             </dl>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Example
              </dt>
              <dd class="body-medium">
               <div>
                <div>
                 <div class="snippet mono-small-block">
                  <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>// Mixed tree whose leaves are e-class calls:
</span><span line-number="2" class=""><span class="tooltip-container"></span>val cA: EClassCall = ...
</span><span line-number="3" class=""><span class="tooltip-container"></span>val cB: EClassCall = ...
</span><span line-number="4" class=""><span class="tooltip-container"></span>val t1: MixedTree[String, EClassCall] =
</span><span line-number="5" class=""><span class="tooltip-container"></span> MixedTree.Node("add", Seq.empty, Seq.empty,
</span><span line-number="6" class=""><span class="tooltip-container"></span>   Seq(MixedTree.Call(cA), MixedTree.Call(cB)))
</span><span line-number="7" class=""><span class="tooltip-container"></span>// A Node leaf (no children):
</span><span line-number="8" class=""><span class="tooltip-container"></span>val lit: MixedTree[String, EClassCall] =
</span><span line-number="9" class=""><span class="tooltip-container"></span> MixedTree.Node("const42", Seq.empty, Seq.empty, Seq.empty)
</span><span line-number="10" class=""><span class="tooltip-container"></span>// Mixed tree whose leaves are pattern fragments:
</span><span line-number="11" class=""><span class="tooltip-container"></span>val x: Pattern[String] = Pattern.Var.fresh()
</span><span line-number="12" class=""><span class="tooltip-container"></span>val y: Pattern[String] = Pattern.Var.fresh()
</span><span line-number="13" class=""><span class="tooltip-container"></span>val pat: MixedTree[String, Pattern[String]] =
</span><span line-number="14" class=""><span class="tooltip-container"></span> MixedTree.Node("mul", Seq.empty, Seq.empty,
</span><span line-number="15" class=""><span class="tooltip-container"></span>   Seq(MixedTree.Call(x), MixedTree.Call(y)))
</span><span line-number="16" class=""><span class="tooltip-container"></span>// Transform just the node labels:
</span><span line-number="17" class=""><span class="tooltip-container"></span>val upper = pat.mapNodes(_.toUpperCase)
</span><span line-number="18" class=""><span class="tooltip-container"></span>// Transform just the leaves:
</span><span line-number="19" class=""><span class="tooltip-container"></span>val renamed = t1.mapCalls(_.rename(SlotMap.identity(_.slotSet)))
</span></code></pre>
                  <div class="buttons"></div>
                 </div>
                </div>
               </div>
              </dd>
              <dt class="body-small">
               Companion
              </dt>
              <dd class="body-medium">
               <a href="eqsat/MixedTree$.html">object</a>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span></span>
               </div>
              </dd>
              <dt class="body-small">
               Known subtypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block subtypes">
                <div>
                 class <a href="eqsat/MixedTree$$Call.html" t="n">Call</a>[<span t="t">NodeT</span>, <span t="t">CallT</span>]
                </div>
                <div>
                 class <a href="eqsat/MixedTree$$Node.html" t="n">Node</a>[<span t="t">NodeT</span>, <span t="t">CallT</span>]
                </div><span></span>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="modifiers"></span><span class="kind"><span t="k">object </span></span><a href="eqsat/MixedTree$.html" t="n" class="documentableName ">MixedTree</a>
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>Companion object for <a href="eqsat/MixedTree.html">MixedTree</a>, containing constructors, cases, and utility operations.</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>Companion object for <a href="eqsat/MixedTree.html">MixedTree</a>, containing constructors, cases, and utility operations.</p>
             </div>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Companion
              </dt>
              <dd class="body-medium">
               <a href="eqsat/MixedTree.html">trait</a>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span></span>
               </div>
              </dd>
              <dt class="body-small">
               Self type
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <span></span>
                <div>
                 <a href="eqsat/MixedTree$.html" t="n">MixedTree</a>.<span t="k">type</span>
                </div>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="modifiers"></span><span class="kind"><span t="k">trait </span></span><a href="eqsat/Permutation.html" t="n" class="documentableName ">Permutation</a>[<span t="k"></span><span data-unresolved-link="" t="t">Repr</span><span t="k"> &lt;: </span><a href="eqsat/Permutation.html" t="t">Permutation</a>[<span t="t">Repr</span>]]
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>A permutation of slots.</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>A permutation of slots.</p>
             </div>
             <h2 class="h200">Type parameters</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Repr
              </dt>
              <dd class="body-medium">
               <p>The type of the permutation.</p>
              </dd>
             </dl>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span></span>
               </div>
              </dd>
              <dt class="body-small">
               Known subtypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block subtypes">
                <div>
                 class <a href="eqsat/SlotMap.html" t="n">SlotMap</a>
                </div><span></span>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement" data-f-keywords="final,case">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="modifiers"><span t="k">final case </span></span><span class="kind"><span t="k">class </span></span><a href="eqsat/ShapeCall.html" t="n" class="documentableName ">ShapeCall</a>[<span t="k">+</span><span data-unresolved-link="" t="t">NodeT</span>](<span t="k"></span><span t="k"></span><span data-unresolved-link="" t="n">shape</span>: <a href="eqsat/ENode.html" t="t">ENode</a>[<span data-unresolved-link="" t="t">NodeT</span>], <span t="k"></span><span data-unresolved-link="" t="n">renaming</span>: <a href="eqsat/SlotMap.html" t="t">SlotMap</a>)
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>A canonicalized e-node paired with a renaming from its canonical slots back to the original slots.</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>A canonicalized e-node paired with a renaming from its canonical slots back to the original slots.</p>
              <p>A shape is the name-independent normal form of an <a href="eqsat/ENode.html">ENode</a>: all slots that occur in the node are replaced by numbered slots in lexicographic order (<code>$0</code>, <code>$1</code>, ...). The <code>renaming</code> then maps those canonical slots back to the original (caller-context) slots so that applying it to <code>shape</code> reconstructs the original node.</p>
              <p>Typical construction is via <code>ENode.asShapeCall</code>, which guarantees that:</p>
              <ul>
               <li><code>shape</code> is in canonical slot form (all slots numeric, in order).</li>
               <li><code>renaming</code> maps each canonical numeric slot to the original slot it replaced.</li>
              </ul>
              <p>This decomposition underpins hash-consing and equality modulo renaming: equal-up-to-renaming nodes share the same <code>shape</code> and differ only in the <code>renaming</code>.</p>
             </div>
             <h2 class="h200">Type parameters</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               NodeT
              </dt>
              <dd class="body-medium">
               <p>The domain-specific node type.</p>
              </dd>
             </dl>
             <h2 class="h200">Value parameters</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               renaming
              </dt>
              <dd class="body-medium">
               <p>A map from the shape's numeric slots to the original slots. Applying it to <code>shape</code> yields the original node.</p>
              </dd>
              <dt class="body-small">
               shape
              </dt>
              <dd class="body-medium">
               <p>The canonical e-node (slots are numeric and ordered).</p>
              </dd>
             </dl>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Example
              </dt>
              <dd class="body-medium">
               <div>
                <div>
                 <div class="snippet mono-small-block">
                  <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>// Start with a non-canonical node `n` that uses arbitrary slots:
</span><span line-number="2" class=""><span class="tooltip-container"></span>val n: ENode[Op] = ...
</span><span line-number="3" class=""><span class="tooltip-container"></span>// Decompose into canonical shape and a renaming back to the original slots:
</span><span line-number="4" class=""><span class="tooltip-container"></span>val sc: ShapeCall[Op] = n.asShapeCall
</span><span line-number="5" class=""><span class="tooltip-container"></span>// `sc.shape` has numeric slots (`$0`, `$1`, ...), and applying `sc.renaming` reconstructs `n`:
</span><span line-number="6" class=""><span class="tooltip-container"></span>assert(sc.asNode == n)
</span><span line-number="7" class=""><span class="tooltip-container"></span>// To retarget the original slots to fresh ones:
</span><span line-number="8" class=""><span class="tooltip-container"></span>val freshen = SlotMap.bijectionFromSetToFresh(sc.asNode.slotSet)
</span><span line-number="9" class=""><span class="tooltip-container"></span>val scFresh = sc.rename(freshen)
</span><span line-number="10" class=""><span class="tooltip-container"></span>val nFresh  = scFresh.asNode
</span></code></pre>
                  <div class="buttons"></div>
                 </div>
                </div>
               </div>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 trait <span data-unresolved-link="" t="n">Serializable</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Product</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Equals</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span class="show-all-code show-content text-button h100">Show all</span>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement" data-f-keywords="sealed">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="signature-short"><span class="modifiers"><span t="k">sealed </span></span><span class="kind"><span t="k">trait </span></span><a href="eqsat/Slot.html" t="n" class="documentableName ">Slot</a><span t="k"> extends </span><span data-unresolved-link="" t="t">Ordered</span>[<a href="eqsat/Slot.html" t="t">Slot</a>]</span><span class="signature-long"></span>
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>A slot is a symbolic placeholder used to model variables and bindings in a slotted e-graph.</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>A slot is a symbolic placeholder used to model variables and bindings in a slotted e-graph.</p>
              <p>Two concrete kinds of slots exist:</p>
              <ul>
               <li><a href="eqsat/Slot$$NumberedSlot.html">Slot.NumberedSlot</a>: value-based slots identified by an integer (e.g., <code>$0</code>, <code>$1</code>, ...). Any two numbered slots with the same number are equal. These are primarily used for canonicalization and shape-normal forms.</li>
               <li><a href="eqsat/Slot$$UniqueSlot.html">Slot.UniqueSlot</a>: identity-based slots that are always distinct from every other slot unless they are the exact same object. These are appropriate for user- or pass-generated "fresh" variables.</li>
              </ul>
              <p>Equality semantics:</p>
              <ul>
               <li>Numbered slots compare equal if their numbers match.</li>
               <li>Unique slots compare equal only by object identity (reference equality).</li>
              </ul>
              <p>Ordering semantics:</p>
              <ul>
               <li>All numbered slots sort before all unique slots.</li>
               <li>Numbered slots are ordered by their integer <code>n</code>.</li>
               <li>Unique slots use an implementation-defined, identity-derived ordering suitable for in-memory canonicalization but not for persistence. Do not rely on the absolute ordering of unique slots across processes or runs.</li>
              </ul>
              <p>Typical usage:</p>
              <ul>
               <li>External callers should prefer <code>Slot.fresh()</code> (a new <a href="eqsat/Slot$$UniqueSlot.html">Slot.UniqueSlot</a>) for generating fresh variables.</li>
               <li>Canonicalization and shape computation use <code>Slot.numeric(n)</code> (a <a href="eqsat/Slot$$NumberedSlot.html">Slot.NumberedSlot</a>) to assign <code>$0, $1, ...</code>.</li>
              </ul>
             </div>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               See also
              </dt>
              <dd class="body-medium">
               <div>
                <div>
                 <p><a href="eqsat/Slot$.html#numeric-fffff726">Slot.numeric</a> for canonical, numbered slots used in shapes</p>
                </div>
                <div>
                 <p><a href="eqsat/Slot$.html#fresh-17f">Slot.fresh</a> for identity-unique slots suitable for user-facing variables</p>
                </div>
               </div>
              </dd>
              <dt class="body-small">
               Note
              </dt>
              <dd class="body-medium">
               <div>
                <div>
                 <p>Slots are immutable labels; renaming is expressed separately via <code>SlotMap</code>.</p>
                </div>
               </div>
              </dd>
              <dt class="body-small">
               Example
              </dt>
              <dd class="body-medium">
               <div>
                <div>
                 <div class="snippet mono-small-block">
                  <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>// Fresh, identity-unique slots (never equal unless the same object):
</span><span line-number="2" class=""><span class="tooltip-container"></span>val x1: Slot = Slot.fresh()
</span><span line-number="3" class=""><span class="tooltip-container"></span>val x2: Slot = Slot.fresh()
</span><span line-number="4" class=""><span class="tooltip-container"></span>assert(x1 != x2)
</span><span line-number="5" class=""><span class="tooltip-container"></span>// Numbered slots used in canonical forms:
</span><span line-number="6" class=""><span class="tooltip-container"></span>val s0: Slot = Slot.numeric(0)  // `$0`
</span><span line-number="7" class=""><span class="tooltip-container"></span>val s1: Slot = Slot.numeric(1)  // `$1`
</span><span line-number="8" class=""><span class="tooltip-container"></span>assert(s0 != s1)
</span><span line-number="9" class=""><span class="tooltip-container"></span>assert(Slot.numeric(0) == s0)   // same number =&gt; equal
</span><span line-number="10" class=""><span class="tooltip-container"></span>// Ordering: numbered slots come before unique slots
</span><span line-number="11" class=""><span class="tooltip-container"></span>val sorted = List(x1, s1, x2, s0).sorted
</span><span line-number="12" class=""><span class="tooltip-container"></span>assert(sorted.take(2) == List(s0, s1))
</span></code></pre>
                  <div class="buttons"></div>
                 </div>
                </div>
               </div>
              </dd>
              <dt class="body-small">
               Companion
              </dt>
              <dd class="body-medium">
               <a href="eqsat/Slot$.html">object</a>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 trait <span data-unresolved-link="" t="n">Ordered</span>[<a href="eqsat/Slot.html" t="t">Slot</a>]
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Comparable</span>[<a href="eqsat/Slot.html" t="t">Slot</a>]
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span></span>
               </div>
              </dd>
              <dt class="body-small">
               Known subtypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block subtypes">
                <div>
                 class <a href="eqsat/Slot$$NumberedSlot.html" t="n">NumberedSlot</a>
                </div>
                <div>
                 class <a href="eqsat/Slot$$UniqueSlot.html" t="n">UniqueSlot</a>
                </div><span></span>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="modifiers"></span><span class="kind"><span t="k">object </span></span><a href="eqsat/Slot$.html" t="n" class="documentableName ">Slot</a>
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>Constructors and concrete slot types.</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>Constructors and concrete slot types.</p>
             </div>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Companion
              </dt>
              <dd class="body-medium">
               <a href="eqsat/Slot.html">trait</a>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span></span>
               </div>
              </dd>
              <dt class="body-small">
               Self type
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <span></span>
                <div>
                 <a href="eqsat/Slot$.html" t="n">Slot</a>.<span t="k">type</span>
                </div>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement" data-f-keywords="final,case">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="signature-short"><span class="modifiers"><span t="k">final case </span></span><span class="kind"><span t="k">class </span></span><a href="eqsat/SlotMap.html" t="n" class="documentableName ">SlotMap</a>(<span t="k"></span><span t="k"></span><span data-unresolved-link="" t="n">map</span>: <span data-unresolved-link="" t="t">Map</span>[<a href="eqsat/Slot.html" t="t">Slot</a>, <a href="eqsat/Slot.html" t="t">Slot</a>])<span t="k"> extends </span><a href="eqsat/Permutation.html" t="t">Permutation</a>[<a href="eqsat/SlotMap.html" t="t">SlotMap</a>]<span t="k">, </span></span><span class="signature-long"><span data-unresolved-link="" t="t">Ordered</span>[<a href="eqsat/SlotMap.html" t="t">SlotMap</a>]</span>
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>A total map from parameter slots (keys) to argument slots (values).</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>A total map from parameter slots (keys) to argument slots (values).</p>
              <p>In slotted e-graphs, <code>SlotMap</code> carries the binding from an e-class's parameter slots to the caller's argument slots (e.g., inside <a href="eqsat/EClassCall.html">EClassCall</a>), and is also used for renaming during canonicalization.</p>
              <p>Conventions and terminology:</p>
              <ul>
               <li>Bijection: every key maps to a unique value (no two keys map to the same value).</li>
               <li>Permutation: a bijection whose key set equals its value set (i.e., a re-labeling of the same set).</li>
              </ul>
              <p>Ordering and iteration:</p>
              <ul>
               <li>Iteration (<code>iterator</code>, <code>keys</code>, <code>values</code>) is key-sorted (<code>Ordered[Slot]</code>), making listings deterministic.</li>
               <li><code>Ordered[SlotMap]</code> provides lexicographic order by sorted keys, then by corresponding values.</li>
              </ul>
              <p>Composition model:</p>
              <ul>
               <li>Viewing slot maps as functions on slots, <code>this.compose(other)</code> corresponds to <code>other ∘ this</code>. That is, apply <code>this</code> first, then <code>other</code>.</li>
              </ul>
             </div>
             <h2 class="h200">Value parameters</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               map
              </dt>
              <dd class="body-medium">
               <p>The underlying immutable mapping from parameter to argument slots.</p>
              </dd>
             </dl>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Companion
              </dt>
              <dd class="body-medium">
               <a href="eqsat/SlotMap$.html">object</a>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 trait <span data-unresolved-link="" t="n">Serializable</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Product</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Equals</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Ordered</span>[<a href="eqsat/SlotMap.html" t="t">SlotMap</a>]
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Comparable</span>[<a href="eqsat/SlotMap.html" t="t">SlotMap</a>]
                </div>
                <div>
                 trait <a href="eqsat/Permutation.html" t="n">Permutation</a>[<a href="eqsat/SlotMap.html" t="t">SlotMap</a>]
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span class="show-all-code show-content text-button h100">Show all</span>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="modifiers"></span><span class="kind"><span t="k">object </span></span><a href="eqsat/SlotMap$.html" t="n" class="documentableName ">SlotMap</a>
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>Constructors and utilities for building <a href="eqsat/SlotMap.html">SlotMap</a>s.</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>Constructors and utilities for building <a href="eqsat/SlotMap.html">SlotMap</a>s.</p>
             </div>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Companion
              </dt>
              <dd class="body-medium">
               <a href="eqsat/SlotMap.html">class</a>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 trait <span data-unresolved-link="" t="n">Product</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Mirror</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span></span>
               </div>
              </dd>
              <dt class="body-small">
               Self type
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <span></span>
                <div>
                 <a href="eqsat/SlotMap$.html" t="n">SlotMap</a>.<span t="k">type</span>
                </div>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement" data-f-keywords="final,case">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="modifiers"><span t="k">final case </span></span><span class="kind"><span t="k">class </span></span><a href="eqsat/Tree.html" t="n" class="documentableName ">Tree</a>[<span t="k">+</span><span data-unresolved-link="" t="t">NodeT</span>](<span t="k"></span><span t="k"></span><span data-unresolved-link="" t="n">nodeType</span>: <span data-unresolved-link="" t="t">NodeT</span>, <span t="k"></span><span data-unresolved-link="" t="n">definitions</span>: <span data-unresolved-link="" t="t">Seq</span>[<a href="eqsat/Slot.html" t="t">Slot</a>], <span t="k"></span><span data-unresolved-link="" t="n">uses</span>: <span data-unresolved-link="" t="t">Seq</span>[<a href="eqsat/Slot.html" t="t">Slot</a>], <span t="k"></span><span data-unresolved-link="" t="n">args</span>: <span data-unresolved-link="" t="t">Seq</span>[<a href="eqsat/Tree.html" t="t">Tree</a>[<span data-unresolved-link="" t="t">NodeT</span>]])
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>An immutable, slot-aware, ordered tree representation of a term.</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>An immutable, slot-aware, ordered tree representation of a term.</p>
              <p>Each node contains:</p>
              <ul>
               <li><code>nodeType</code>: The domain-specific operator or constructor at this position in the tree.</li>
               <li><code>definitions</code>: The slots bound by this node (e.g., local variables it introduces).</li>
               <li><code>uses</code>: The slots referenced by this node that are defined elsewhere in the tree.</li>
               <li><code>args</code>: A sequence of child subtrees.</li>
              </ul>
              <p><code>Tree</code> is the structural (non-hash-consed) analogue to <a href="eqsat/MixedTree.html">MixedTree</a> and <a href="eqsat/ENode.html">ENode</a>. Unlike an e-graph, which merges equivalent subterms, a <code>Tree</code> retains explicit duplication and hierarchy, making it suitable for parsing, printing, and intermediate transformations prior to e-graph insertion.</p>
              <p>Slot information makes the <code>Tree</code> representation aware of variable binding and usage sites, enabling correct handling of alpha-equivalence and scoping-sensitive rewrites.</p>
             </div>
             <h2 class="h200">Type parameters</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               NodeT
              </dt>
              <dd class="body-medium">
               <p>The type used to represent operators/constructors.</p>
              </dd>
             </dl>
             <h2 class="h200">Value parameters</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               args
              </dt>
              <dd class="body-medium">
               <p>Ordered children of this node.</p>
              </dd>
              <dt class="body-small">
               definitions
              </dt>
              <dd class="body-medium">
               <p>Slots bound/introduced by this node itself.</p>
              </dd>
              <dt class="body-small">
               nodeType
              </dt>
              <dd class="body-medium">
               <p>The operator or constructor at this node.</p>
              </dd>
              <dt class="body-small">
               uses
              </dt>
              <dd class="body-medium">
               <p>Slots consumed by this node but defined elsewhere.</p>
              </dd>
             </dl>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Example
              </dt>
              <dd class="body-medium">
               <div>
                <div>
                 <div class="snippet mono-small-block">
                  <pre><code class="language-"><span line-number="1" class=""><span class="tooltip-container"></span>// Construct a simple tree for: λx. x
</span><span line-number="2" class=""><span class="tooltip-container"></span>val xSlot = Slot.fresh()
</span><span line-number="3" class=""><span class="tooltip-container"></span>val body  = Tree("var", definitions = Seq.empty, uses = Seq(xSlot), args = Seq.empty)
</span><span line-number="4" class=""><span class="tooltip-container"></span>val lam   = Tree("lambda", definitions = Seq(xSlot), uses = Seq.empty, args = Seq(body))
</span><span line-number="5" class=""><span class="tooltip-container"></span>assert(lam.definitions == Seq(xSlot))
</span><span line-number="6" class=""><span class="tooltip-container"></span>assert(lam.args.head.uses.contains(xSlot))
</span><span line-number="7" class=""><span class="tooltip-container"></span>// Map over node types to produce a pretty-printed label:
</span><span line-number="8" class=""><span class="tooltip-container"></span>val labeled = lam.map(op =&gt; s"&lt;$op&gt;")
</span></code></pre>
                  <div class="buttons"></div>
                 </div>
                </div>
               </div>
              </dd>
              <dt class="body-small">
               Companion
              </dt>
              <dd class="body-medium">
               <a href="eqsat/Tree$.html">object</a>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 trait <span data-unresolved-link="" t="n">Serializable</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Product</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Equals</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span class="show-all-code show-content text-button h100">Show all</span>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
        <div class="documentableElement">
         <div class="documentableElement-expander">
          <button class="icon-button ar show-content"></button>
          <div class="header monospace mono-medium">
           <div class="signature">
            <span class="modifiers"></span><span class="kind"><span t="k">object </span></span><a href="eqsat/Tree$.html" t="n" class="documentableName ">Tree</a>
           </div>
          </div>
         </div>
         <div class="docs">
          <span class="modifiers"></span>
          <div>
           <div class="originInfo"></div>
           <div class="memberDocumentation">
            <div class="documentableBrief doc">
             <p>Companion utilities for <a href="eqsat/Tree.html">Tree</a>.</p>
            </div>
            <div class="cover">
             <div class="doc">
              <p>Companion utilities for <a href="eqsat/Tree.html">Tree</a>.</p>
             </div>
             <h2 class="h200">Attributes</h2>
             <dl class="attributes attributes-small">
              <dt class="body-small">
               Companion
              </dt>
              <dd class="body-medium">
               <a href="eqsat/Tree.html">class</a>
              </dd>
              <dt class="body-small">
               Supertypes
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <div>
                 trait <span data-unresolved-link="" t="n">Product</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Mirror</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Object</span>
                </div>
                <div>
                 trait <span data-unresolved-link="" t="n">Matchable</span>
                </div>
                <div>
                 class <span data-unresolved-link="" t="n">Any</span>
                </div><span></span>
               </div>
              </dd>
              <dt class="body-small">
               Self type
              </dt>
              <dd class="body-medium">
               <div class="mono-small-block supertypes">
                <span></span>
                <div>
                 <a href="eqsat/Tree$.html" t="n">Tree</a>.<span t="k">type</span>
                </div>
               </div>
              </dd>
             </dl>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </section>
     </div>
    </section>
   </div>
  </div>
 </div>
</section></div><div id="toc" class="body-small"><div id="toc-container"><span class="toc-title h200">In this article</span><nav class="toc-nav"><ul class="toc-list"><li><a href="#attributes">Attributes</a></li><li><a href="#members-list">Members list</a><ul><li><a href="#Packages">Packages</a></li><li><a href="#Type-members">Type members</a><ul><li><a href="#Classlikes">Classlikes</a></li></ul></li></ul></li></ul></nav></div></div></div><div id="footer" class="body-small mobile-footer"><div class="left-container">Generated with</div><div class="right-container"><div class="text"></div></div><div class="text-mobile"></div></div></div></div></body></html>